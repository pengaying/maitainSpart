var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(b,c,d){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==d||d>a)d=a;d=Number(d);0>d&&(d=Math.max(0,a+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(b){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}},"es6","es3");
var y="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},z="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function A(a,b){if(b){var c=z;a=a.split(".");for(var d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&y(c,a,{configurable:!0,writable:!0,value:b})}}
A("Array.prototype.fill",function(a){return a?a:function(b,c,d){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==d||d>a)d=a;d=Number(d);0>d&&(d=Math.max(0,a+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});
(function(){function a(c,b){var d=c.x-b.x;c=c.y-b.y;b=Math.sqrt(d*d+c*c);d=0<c?Math.acos(d/b)+Math.PI/2:2*Math.PI-Math.acos(d/b)+Math.PI/2;d>2*Math.PI&&(d-=2*Math.PI);return d%(2*Math.PI)}var b={};window.f=b;b.a=function(c,b){this.x=c;this.y=b};b.a.prototype={sub:function(c){return new b.a(this.x-c.x,this.y-c.y)},add:function(c){return new b.a(this.x+c.x,this.y+c.y)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(c){var b=this.length();this.x=this.x*c/b;this.y=
this.y*c/b},toString:function(){return"["+this.x+","+this.y+"]"},ua:function(c){return 1E-6>Math.abs(c.x-this.x)&&1E-6>Math.abs(c.y-this.y)?!0:!1},clone:function(){return new b.a(this.x,this.y)},set:function(c){this.x=c.x;this.y=c.y}};b.a.f=function(c,d,a){return new b.a(c.x*a+d.x*(1-a),c.y*a+d.y*(1-a))};b.a.g=function(c,b){return Math.sqrt((b.x-c.x)*(b.x-c.x)+(b.y-c.y)*(b.y-c.y))};b.ba=function(c,b,a,e,g){this.P=c;this.R=b;this.h=a;this.i=e;this.end=g};b.K=function(){this.l=-1;this.B=10;this.S=2;
this.ta=this.sa=this.F=.5};b.A=function(c,d){this.C=new b.a(c,d);this.j=new b.a(c,d);this.s=new b.a(c,d)};b.O=function(c,b,a,e,g,h){this.pa=c;this.qa=b;this.ra=a;this.d=e;this.e=g;this.va=h};b.O.prototype={wa:function(){this.pa=1;this.qa=this.e=this.ra=0;this.d=1;this.va=0},rotate:function(c){var d=Math.cos(c);c=Math.sin(c);return new b.O(d,c,-c,d,0,0)},xa:function(c){return new b.a(this.pa*c.x+this.ra*c.y+this.e,this.qa*c.x+this.d*c.y+this.va)}};b.c=function(){};b.c.o=function(c,d,a,e){d=(d.y-c.y)/
(d.x-c.x);e=(e.y-a.y)/(e.x-a.x);if(d==e)return null;if(isFinite(d)){if(isFinite(e)){var f=c.y-d*c.x;a=a.y-e*a.x;c=(f-a)/(e-d)}else f=c.y-d*c.x,c=a.x;a=d*c+f}else c=c.x,a=a.y-e*a.x,a=e*c+a;return new b.a(c,a)};b.c.g=function(c,b,a){a=a.sub(b);c=c.sub(b);return 0<a.x*c.y-a.y*c.x?!0:!1};b.c.$=function(c,a,f,e,g,h){h=Math.sqrt(Math.max(Math.max(b.a.g(a,f),b.a.g(a,e)),b.a.g(f,g)))*(h||1);30>h&&(h=30);for(var d,l,n=0;1>=n;n+=1/h)d=Math.pow(n,3)*(f.x+3*(e.x-g.x)-a.x)+3*Math.pow(n,2)*(a.x-2*e.x+g.x)+3*n*
(e.x-a.x)+a.x,l=Math.pow(n,3)*(f.y+3*(e.y-g.y)-a.y)+3*Math.pow(n,2)*(a.y-2*e.y+g.y)+3*n*(e.y-a.y)+a.y,c.push(new b.a(d,l))};b.c.u=function(c,a,f,e,g){for(var d,k=Math.sqrt(Math.max(Math.max(b.a.g(a,f),b.a.g(a,e)),b.a.g(f,e)))*(g||1),l=0;1>=l;l+=1/k)g=(1-l)*(1-l)*a.x+2*l*(1-l)*e.x+l*l*f.x,d=(1-l)*(1-l)*a.y+2*l*(1-l)*e.y+l*l*f.y,c.push(new b.a(g,d));c.push(new b.a(f.x,f.y))};b.c.Sa=function(c,a,f){var d=f.sub(a);d=c.add(new b.a(-d.y,d.x));a=b.a.f(a,f,.5).sub(b.c.o(a,f,c,d));return c.add(a).add(a)};
b.c.D=function(c,a,f){var d=b.a.g(c,a),g=b.a.g(a,f);c=f.sub(c);c.normalize(1);f=new b.A(a.x,a.y);f.s.x=a.x-c.x*d*.3;f.s.y=a.y-c.y*d*.3;f.j.x=a.x+c.x*g*.3;f.j.y=a.y+c.y*g*.3;return f};b.c.J=function(c){for(var a=0,f=c.length,e=0;e<f-1;e++)a+=b.a.g(c[e],c[e+1]);return a};b.c.Ra=function(c,a){var d=c.length;if(0>a)return c[0];if(1<a)return c[d-1];a*=b.c.J(c);for(var e=0,g,h=0;h<d-1;h++){var k=b.a.g(c[h],c[h+1]);e+=k;if(e>=a){g=b.a.f(c[h],c[h+1],(e-a)/k);break}}return g};b.c.v=function(c,a,f,e,g){var d=
d||"JointStyle.MITER",k=k||Number.NaN,l=c.length;if(!(2>l))for(var n=b.c.J(c),m=0,p,q=0;q<l;q++)0==q?(p=b.c.Z(c[0],c[1],e),a.push(p.pop()),f.push(p.pop())):q==c.length-1?(p=b.c.Z(c[c.length-1],c[c.length-2],g),f.push(p.pop()),a.push(p.pop())):(m+=b.a.g(c[q],c[q-1]),p=b.c.Aa(c[q-1],c[q],c[q+1],e-m/n*(e-g),d,k),a.push(p.pop()),f.push(p.pop()))};b.c.Aa=function(c,a,f,e,g,h){var d=c.sub(a),l=f.sub(a);d.normalize(1);l.normalize(1);l=d.add(l);l.normalize(1);if(.001>Math.abs(l.x)&&.001>Math.abs(l.y))return b.c.Z(a,
f,e);"JointStyle.MITER"==g?(f=d.x*l.x+d.y*l.y,e/=Math.sqrt(1-f*f),!isNaN(h)&&e>h?l.normalize(h):l.normalize(e)):"JointStyle.ROUND"==g&&l.normalize(e);h=a.add(l);e=[];b.c.g(h,c,a)?(e.push(h),e.push(a.sub(l))):(e.push(a.sub(l)),e.push(h));return e};b.c.Z=function(c,a,f){a=a.sub(c);a=new b.a(a.y,-a.x);a.normalize(f);f=c.add(a);c=c.sub(a);a=[];a.push(c);a.push(f);return a};b.c.w=function(c,a){var b=[];if(2>c.length)return b;if(2==c.length)return b.push(c[0]),b.push(c[1]),b;c=this.Fa(c,a);for(a=0;a<c.length-
1;a++){var d=c[a],g=c[a+1];this.$(b,d.C,g.C,d.j,g.s,1)}return b};b.c.Fa=function(c,a){var d=[],e=c.length;if(a){for(a=0;a<e;a++)0==a?d.push(b.c.D(c[e-1],c[a],c[a+1])):a==e-1?d.push(b.c.D(c[a-1],c[a],c[0])):d.push(b.c.D(c[a-1],c[a],c[a+1]));d.push(b.c.D(c[e-1],c[0],c[1]))}else for(a=0;a<e;a++)0==a||a==e-1?d.push(new b.A(c[a].x,c[a].y)):d.push(b.c.D(c[a-1],c[a],c[a+1]));return d};b.c.T=function(c,a,f){if(0>(c.x-a.x)*(f.x-a.x)+(c.y-a.y)*(f.y-a.y))var d=b.a.g(c,a);else if(0>(c.x-f.x)*(a.x-f.x)+(c.y-f.y)*
(a.y-f.y))d=b.a.g(c,f);else{var g=c.sub(a),h=c.sub(f);g=Math.abs(g.x*h.y-g.y*h.x);f=b.a.g(a,f);0==f?d=b.a.g(c,a):d=g/f}return d};b.c.Pa=function(c){for(var a=[],f=c.length,e=0;e<f-1;e++){var g=c[e],h=c[e+1];b.c.$(a,g.C,h.C,g.s,h.j,3)}b.c.$(a,c[f-1].C,c[0].C,c[f-1].s,c[0].j,3);return a};b.b=function(){};b.b.w=function(c,a){c=b.c.w(c,a);a=[];for(var d=0;d<c.length;d++){var e=c[d];a.push([e.x,e.y])}return a};b.b.la=function(c,a,f){c=b.b.ya(c,a,f);c=b.b.Ba(c[2],c[0],c[1]);c=b.c.Pa(c);a=[];for(f=0;f<c.length;f++){var d=
c[f];a.push([d.x,d.y])}return a};b.b.ya=function(c,a,f){var d=b.a.g(c,a),g=b.a.g(c,f),h=Math.max(d,b.a.g(a,f),g);return h==d?b.b.U(f,c,a):h==g?b.b.U(a,c,f):b.b.U(c,a,f)};b.b.U=function(c,a,f){var d=f.sub(a);d=new b.a(d.y,-d.x);var g=b.c.T(c,a,f);d.normalize(g);g=b.a.f(a,f,.5);var h=[];b.c.g(c,a,f)?(h.push(f),h.push(a),h.push(g.sub(d))):(h.push(a),h.push(f),h.push(g.add(d)));h.push(c);return h};b.b.Ba=function(a,d,f){var c=[],g=b.a.g(d,f),h=b.a.f(d,f,.5),k=f.sub(d),l=new b.a(k.y,-k.x),n=b.c.T(a,d,
f);l.normalize(g/4);var m=new b.O;m.wa();m=m.rotate(-Math.PI/8);var p=m.xa(l);m=new b.A(d.x,d.y);m.j=new b.a(d.sub(p).x,d.sub(p).y);m.s=new b.a(d.add(p).x,d.add(p).y);c.push(m);k.normalize(g/4);m=new b.A(a.x,a.y);m.j=new b.a(a.sub(k).x,a.sub(k).y);m.s=new b.a(a.add(k).x,a.add(k).y);c.push(m);l.normalize(g/4);m=new b.O;m.wa();m=m.rotate(Math.PI/8);p=m.xa(l);m=new b.A(f.x,f.y);m.j=new b.a(f.add(p).x,f.add(p).y);m.s=new b.a(f.sub(p).x,f.sub(p).y);c.push(m);l.normalize(Math.sqrt(n));a=h.sub(l);k.normalize(g/
4);m=new b.A(a.x,a.y);m.j=new b.a(a.add(k).x,a.add(k).y);m.s=new b.a(a.sub(k).x,a.sub(k).y);c.push(m);return c};b.b.W=function(a,d,f,e,g){a=d.sub(a);f*=a.length();f>e&&0<e?a.normalize(e):a.normalize(f);e=d.sub(a);return b.b.da(e,d,g)};b.b.M=function(a,d,f){var c=d.sub(a);f=f?new b.a(c.y,-c.x):new b.a(-c.y,c.x);a=b.a.f(a,d,.5);c.length();f.x/=8;f.y/=8;return a.add(f)};b.b.V=function(a,d,f,e,g){if(!d.ua(f)){g=g||.5;var c=f.sub(d),k=-1!=e.l?e.l/2:c.length()/2;e.S=k/2;c=new b.a(c.y,-c.x);c.normalize(e.S*
g);var l=d.add(c),n=d.sub(c),m=f.add(c),p=f.sub(c);c.normalize(k);g=d.add(c);var q=d.sub(c),u=b.a.f(f,d,e.F);l=b.c.o(l,m,u,g);n=b.c.o(n,p,u,q);d=b.a.f(f,d,e.sa);c=c.clone();c.normalize(k*e.ta);d.add(c);d.sub(c);a.push(l);a.push(g);a.push(f);a.push(q);a.push(n)}};b.b.X=function(a,d,f,e,g){d=f.sub(d);e*=d.length();d.normalize(e);e=f.sub(d);b.b.V(a,e,f,g,.5)};b.b.da=function(a,d,f){if(a.ua(d))return new b.ba(a,a,a,a,a);var c=d.sub(a),g=-1!=f.l?f.l/2:c.length()/2;f.S=g/2;var h=new b.a(c.y,-c.x);h.normalize(f.S/
2);c=a.add(h);var k=a.sub(h),l=d.add(h),n=d.sub(h);h.normalize(g);var m=a.add(h),p=a.sub(h),q=b.a.f(d,a,f.F);l=b.c.o(c,l,q,m);n=b.c.o(k,n,q,p);a=b.a.f(d,a,f.sa);h=h.clone();h.normalize(g*f.ta);a.add(h);a.sub(h);return new b.ba(c,k,l,n,d)};b.b.ia=function(a,d,f,e,g){var c=[],k=b.b.W(a,f,.3,80,g),l=b.b.W(d,e,.3,80,g),n=[],m=[];b.b.X(n,a,f,.3,g);b.b.X(m,d,e,.3,g);var p=b.c.g(f,a,d),q=b.c.g(e,a,d);e=b.c.g(k.h,a,d);f=b.c.g(k.i,a,d);g=b.c.g(l.h,a,d);var u=b.c.g(l.i,a,d);if(0==p){var v=k.i,w=k.R,r=b.b.M(a,
k.h,!0);b.c.u(c,a,k.h,r,3);c=c.concat(n)}else{v=k.h;w=k.P;r=b.b.M(a,k.i,!1);var x=[];b.c.u(x,a,k.i,r,3);c=c.concat(x);c=c.concat(n.reverse())}r=a.sub(d);1==q?(k=l.i,n=l.R,a=b.b.na(a,d,v,k,p==q),p=a.add(r),b.b.oa(c,v,w,a,p,k,n,e==f,g==u),c=c.concat(m.reverse()),r=b.b.M(l.h,d,!1),b.c.u(c,l.h,d,r,3)):(k=l.h,n=l.P,a=b.b.na(a,d,v,k,p==q),p=a.add(r),b.b.oa(c,v,w,a,p,k,n,e==f,g==u),c=c.concat(m),r=b.b.M(l.i,d,!0),b.c.u(c,l.i,d,r,3));d=[];for(l=0;l<c.length;l++)m=c[l],d.push([m.x,m.y]);return d};b.b.oa=function(a,
d,f,e,g,h,k,l,n){f=l?b.c.o(d,f,e,g):f;g=n?b.c.o(h,k,e,g):k;f&&b.c.u(a,d,e,f,1);g&&b.c.u(a,e,h,g,1)};b.b.na=function(a,d,f,e,g){var c=b.a.f(a,d,.5),k=b.a.f(f,e,.5),l=a.sub(d),n=f.add(l);l=e.add(l);n=b.c.o(n,f,c,k);l=b.c.o(l,e,c,k);var m=b.a.g(c,n),p=b.a.g(c,l);b.c.g(f,a,d);b.c.g(e,a,d);if(g)return m<p?b.a.f(c,n,.7):b.a.f(c,l,.7);a=b.a.f(c,k,.9);return Math.min(m,p)>b.a.g(c,a)?a:m<p?b.a.f(n,c,.3):b.a.f(l,c,.3)};b.b.L=function(a,d,f,e,g){var c=[],k=d.sub(a);k=new b.a(k.y,-k.x);k.normalize(b.a.g(a,d)*
e);e=a.add(k);k=a.sub(k);c.push(e);b.b.V(c,b.a.f(a,d,.3),d,f,g);c.push(k);a=[];for(d=0;d<c.length;d++)f=c[d],a.push([f.x,f.y]);return a};b.b.N=function(a,d,f,e,g){g|=0;var c=[],k=b.a.f(a,d,.5);if(b.c.g(a,k,f))var l=d,n=a;else l=a,n=d;var m=b.a.f(k,f,.3);k=b.b.da(m,f,e);var p=[];b.b.V(p,m,f,e);m=k.P.add(k.P.sub(k.h));e=k.R.add(k.R.sub(k.i));b.c.u(c,l,k.h,m);c=c.concat(p);l=[];b.c.u(l,k.i,n,e);c=c.concat(l);1==g&&c.push(b.a.f(b.a.f(a,d,.5),f,.8));a=[];for(d=0;d<c.length;d++)f=c[d],a.push([f.x,f.y]);
return a};b.b.ga=function(a,d){var c=.07,e=a.length,g=a[e-1],h=b.c.D(a[e-3],a[e-2],g),k=b.b.W(h.j,g,.5,200,d);e=[];b.b.X(e,h.j,g,.5,d);g=[];d=[];b.c.v(a,g,d,b.c.J(a)*c,b.a.g(k.h,k.i)/2);g[g.length-1]=k.h;d[d.length-1]=k.i;a=b.c.w(g);c=b.c.w(d);e=a.concat(e);e=e.concat(c.reverse());a=[];for(c=0;c<e.length;c++)k=e[c],a.push([k.x,k.y]);return a};b.b.Qa=function(a,d,f,e){var c=null,h=new b.K;if(2001==a){if(4>d.length)return;c=b.b.ia(d[0],d[1],d[2],d[3],h)}else 2003==a?c=b.b.L(d[0],d[1],h,.125,.5):2004==
a?(h.l=.8*b.a.g(d[0],d[1]),h.F=0,c=b.b.L(d[0],d[1],h,.35,.8)):2005==a?c=b.b.N(d[0],d[1],d[2],h):2006==a?c=b.b.N(d[0],d[1],d[2],h):2007==a?c=b.b.ga(d,h):2008==a?c=b.b.w(d,!0):2011==a&&(c=b.b.la(d[0],d[1],d[2]));if(null!=c){e.beginPath();e.moveTo(c[0].x,c[0].y);for(a=1;a<c.length;a++)e.lineTo(c[a].x,c[a].y);e.lineTo(c[0].x,c[0].y);e.closePath();e.fillStyle=f.fillColor;e.fill()}return c};b.b.m=function(c,d,f){var e=[];if(isNaN(f.x)||isNaN(f.y)||1>b.c.T(f,c,d))return[c,d];var g=(c.x*c.x-d.x*d.x+c.y*c.y-
d.y*d.y)/2,h=(d.x*d.x-f.x*f.x+d.y*d.y-f.y*f.y)/2,k=c.x-d.x,l=d.x-f.x,n=c.y-d.y,m=d.y-f.y;g={x:(g*m-h*n)/(k*m-l*n),y:(g*l-h*k)/(n*l-m*k)};h=b.a.g(c,g);c=a(c,g)-Math.PI/2;k=a(d,g)-Math.PI/2;l=a(f,g)-Math.PI/2;d=Math.min(c,k);f=Math.max(c,k);if(l<d||l>f)c=d,d=f,f=c+2*Math.PI;for(;d<=f;d+=.1)c=g.x+h*Math.cos(d),k=g.y+h*Math.sin(d),e.push(new b.a(c,k));c=g.x+h*Math.cos(f);k=g.y+h*Math.sin(f);e.push(new b.a(c,k));return e};b.b.aa=function(a,d){for(var c=a.length,e=[],g,h=0;h<c;h++)0==h?(g=b.a.g(a[0],a[1]),
e.push(b.a.f(a[0],a[1],1+d/g)),e.push(b.a.f(a[0],a[1],1-d/g))):c-1==h?(g=b.a.g(a[c-2],a[c-1]),e.push(b.a.f(a[c-2],a[c-1],d/g)),e.push(b.a.f(a[c-2],a[c-1],-d/g))):(e.push(b.a.f(a[h-1],a[h],d/b.a.g(a[h-1],a[h]))),e.push(b.a.f(a[h],a[h+1],1-d/b.a.g(a[h],a[h+1]))));return e};b.b.I=function(a){if(2>a.length)return a;var c=Math.sqrt(b.c.J(a)/a.length),f=[];b.c.v(a,[],f,c,c);c=b.b.aa(a,c);a=[];for(var e=0;e<f.length;e++){var g=b.b.m(c[2*e],c[2*e+1],f[e]);a=a.concat(g.reverse())}f=[];f.push(a);return f};
b.b.Y=function(a,d){if(2>a.length)return a;d=Math.sqrt(b.c.J(a)/a.length);var c=[];b.c.v(a,[],c,d,d);a=b.b.aa(a,d);d=[];for(var e=0;e<c.length;e++){var g=b.b.m(a[2*e],a[2*e+1],c[e]);g=g.reverse();d.push(g)}return d};b.b.Na=function(a){if(2>a.length)return a;var c=[],f=[],e=a[0],g=a[1],h=30/(30+Math.sqrt((e.x-g.x)*(e.x-g.x)+(e.y-g.y)*(e.y-g.y))),k=(g.x-e.x*h)/(1-h),l=(g.y-e.y*h)/(1-h),n=new b.a((e.x-g.x*h)/(1-h),(e.y-g.y*h)/(1-h));h=e.sub(n);h=new b.a(h.y,-h.x);h.normalize(20);n=b.a.f(e,n,.5);e=n.add(h);
h=n.sub(h);c.push(e);f.push(h);b.c.v(a,c,f,10,10);k=new b.a(k,l);h=g.sub(k);a=new b.a(h.y,-h.x);a.normalize(20);k=b.a.f(g,k,.5);g=k.sub(a);a=k.add(a);c.push(g);f.push(a);g=[];g.push(c);g.push(f);return g};b.b.f=function(a,d){var c=new b.K;c.B=6;var e=d.sub(a),g=-1!=c.l?c.l/2:c.B/2,h=new b.a(e.y,-e.x);e=e.clone();e.normalize(e.length()-c.B);e=e.add(a);h=h.clone();h.normalize(g);g=e.add(h);h=e.sub(h);c=b.a.f(d,e,c.F);e=[];e.push(a);e.push(c);e.push(g);e.push(d);e.push(h);e.push(c);return e};b.b.ma=
function(a,d,f){var c=new b.K;c.B=6;var g=d.sub(a),h=-1!=c.l?c.l/2:c.B/2,k=new b.a(g.y,-g.x);g=g.clone();g.normalize(g.length()-c.B);g=g.add(a);k=k.clone();k.normalize(h);h=g.add(k);k=g.sub(k);c=b.a.f(d,g,c.F);g=[];g.push(f);g.push(a);g.push(c);g.push(h);g.push(d);g.push(k);g.push(c);return g};b.b.G=function(a,d){var c=[],e=new b.a(0,0);e.x=a.x-d/2;e.y=a.y+.2*d;var g=new b.a(0,0);g.x=a.x-d/2;g.y=e.y-d/3;var h=new b.a(0,0);h.x=a.x-d/2;h.y=e.y+d/3;var k=[];k.push(new b.a(a.x,a.y));k.push(new b.a(a.x+
d,a.y));c.push(k);k=[];k.push(g);k.push(h);c.push(k);g=new b.a(0,0);g.x=a.x+d/2;g.y=a.y+.2*d;h=new b.a(0,0);h.x=a.x+d/2;h.y=g.y-d/3;k=new b.a(0,0);k.x=a.x+d/2;k.y=g.y+d/3;var l=[];l.push(h);l.push(k);c.push(l);h=[];h.push(e);h.push(g);c.push(h);e=new b.a(0,0);e.x=a.x;e.y=g.y;h=new b.a(0,0);h.x=a.x;h.y=g.y-.8*d;a=b.b.f(e,h);c.push(a);return c};b.b.za=function(a,d){var c=[],e=[];e.push(new b.a(a.x,a.y));e.push(new b.a(a.x+d,a.y));c.push(e);e=new b.a(0,0);e.x=a.x-d/2;e.y=a.y+.2*d;var g=new b.a(0,0);
g.x=a.x-d/2;g.y=e.y-d/3;var h=new b.a(0,0);h.x=a.x-d/2;h.y=e.y+d/3;var k=[];k.push(g);k.push(h);c.push(k);g=new b.a(0,0);g.x=a.x+d/2;g.y=a.y+.2*d;k=new b.a(0,0);k.x=a.x+d/2;k.y=g.y-d/3;h=new b.a(0,0);h.x=a.x+d/2;h.y=g.y+d/3;var l=[];l.push(k);l.push(h);c.push(l);k=[];l=new b.a(0,0);l.x=e.x;l.y=a.y+Math.sqrt(3)*d/2;var n=new b.a(0,0);n.x=g.x;n.y=a.y+Math.sqrt(3)*d/2;e=new b.a(0,0);e.x=a.x;e.y=h.y;k.push(l);k.push(e);k.push(n);c.push(k);h=new b.a(0,0);h.x=a.x;h.y=g.y-.8*d;a=b.b.f(e,h);c.push(a);return c};
b.b.fa=function(a,d){var c=[],e=[];e.push(new b.a(a.x,a.y));e.push(new b.a(a.x+d,a.y));c.push(e);e=new b.a(0,0);e.x=a.x-d/2;e.y=a.y+.2*d;var g=new b.a(0,0);g.x=a.x-d/2;g.y=e.y-d/3;var h=new b.a(0,0);h.x=a.x-d/2;h.y=e.y+d/3;e=[];e.push(g);e.push(h);c.push(e);e=new b.a(0,0);e.x=a.x+d/2;e.y=a.y+.2*d;var k=new b.a(0,0);k.x=a.x+d/2;k.y=e.y-d/3;var l=new b.a(0,0);l.x=a.x+d/2;l.y=e.y+d/3;var n=[];n.push(k);n.push(l);c.push(n);n=b.a.f(g,h,.66);var m=b.a.f(k,l,.33);k=b.a.f(k,l,.66);l=[];l.push(b.a.f(g,h,.33));
l.push(m);c.push(l);g=[];g.push(n);g.push(k);c.push(g);g=new b.a(0,0);g.x=a.x;g.y=k.y;h=new b.a(0,0);h.x=a.x;h.y=e.y-.8*d;a=b.b.f(g,h);c.push(a);return c};b.b.ea=function(a,d,f){d/=b.a.g(a,f);var c=new b.a(0,0);c.x=(1-d)*a.x+d*f.x;c.y=(1-d)*a.y+d*f.y;return c};b.b.ja=function(a,d){var c=[],e=[];e.push(a);e.push(d);var g=[],h=[],k=d.sub(a);k=new b.a(k.y,-k.x);k.normalize(20);g.push(a.add(k));h.push(a.sub(k));b.c.v(e,g,h,10,10);g.push(d.add(k));h.push(d.sub(k));c.push(g);c.push(h);return c};b.b.ka=
function(a,d){var c=[],e=[];e.push(a);e.push(d);var g=[],h=[],k=d.sub(a);k=new b.a(k.y,-k.x);k.normalize(20);g.push(a.add(k));h.push(a.sub(k));b.c.v(e,g,h,5,5);g.push(d.add(k));h.push(d.sub(k));a=b.b.ca(g);h=b.b.ca(h);for(d=0;d<a.length;d++)c.push(a[d]);for(d=0;d<h.length;d++)c.push(h[d]);return c};b.b.ca=function(a){var c=[],f=[];f.push(a[0]);f.push(a[1]);var e=a[1],g=a[2];f.push(b.a.f(e,g,.9));c.push(f);f=[];f.push(b.a.f(e,g,.8));f.push(b.a.f(e,g,.2));c.push(f);f=[];f.push(b.a.f(e,g,.1));f.push(g);
f.push(a[3]);c.push(f);return c};b.b.Ca=function(a,d){if(5>a.length)return a;var c=a[2],e=b.b.ea(c,d,a[1]),g=b.b.ea(c,d,a[3]);e=b.b.ma(a[1],a[0],e);d=b.b.G(c,d);a=b.b.ma(a[3],a[4],g);d.push(e);d.push(a);return d};b.b.Da=function(a,d){if(2>a.length)return a;var c=a[0],e=a[1],g=new b.a(c.x,e.y);a=b.b.ka(c,new b.a(e.x,c.y));g=b.b.ka(e,g);d=b.b.G(b.a.f(c,e,.5),d);for(c=0;c<a.length;c++)d.push(a[c]);for(c=0;c<g.length;c++)d.push(g[c]);return d};b.b.Ea=function(a,d){if(5>a.length)return a;var c=b.b.ja(a[0],
a[1]),e=b.b.ja(a[2],a[3]);a=b.b.G(a[4],d);for(d=0;d<c.length;d++)a.push(c[d]);for(d=0;d<e.length;d++)a.push(e[d]);return a};b.b.Ga=function(a,d){if(4>a.length)return a;d=b.b.G(a[0],d);var c=b.b.f(a[1],a[2]);a=b.b.f(a[1],a[3]);d.push(c);d.push(a);return d};b.b.H=function(a,d,f){var c=[];c.push(a);c.push(d);a=[];b.c.v(c,[],a,f,f);return a};b.b.Ha=function(a,d){if(2>a.length)return a;var c=a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(c=a[1].x,g=a[0].x);a[0].y>a[1].y&&(e=a[1].y,h=a[0].y);a=new b.a(c,
e);g=new b.a(g,h);h=new b.a(g.x,a.y);c=new b.a(a.x,g.y);e=b.b.G(a,d);for(var k=b.b.G(h,d),l=b.b.fa(g,d),n=b.b.fa(c,d),m=[],p=0;p<e.length;p++)m.push(e[p]),m.push(k[p]),m.push(l[p]),m.push(n[p]);for(p=e.length;p<l.length;p++)m.push(l[p]),m.push(n[p]);m.push(b.b.H(a,c,d));m.push(b.b.H(c,g,d));m.push(b.b.H(g,h,d));m.push(b.b.H(h,a,d));return m};b.b.Ia=function(a,d){if(2>a.length)return a;for(var c=[],e=0;e<a.length;e++){for(var g=b.b.za(a[e],d),h=0;h<g.length;h++)c.push(g[h]);e!=a.length-1?(g=a[e],h=
a[e+1]):(g=a[e],h=a[0]);c.push(b.b.H(g,h,d))}return c};b.b.Ja=function(a,d){var c=a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(c=a[1].x,g=a[0].x);a[0].y>a[1].y&&(e=a[1].y,h=a[0].y);a=new b.a(c,e);c=new b.a(g,h);g=new b.a(c.x,a.y);h=new b.a(a.x,c.y);e=[];e.push(a);e.push(h);e.push(c);e.push(g);e.push(a);g=b.b.I(e);h=d[0];d=d[1];a=b.a.f(a,c,.5);c=new b.a(a.x-h/4,a.y-d/2);e=new b.a(a.x-h/2,a.y);var k=new b.a(a.x-h/4,a.y+d/2),l=new b.a(a.x,a.y),n=new b.a(a.x+h/4,a.y-d/2),m=new b.a(a.x+h/2,a.y),p=
[];p.push(new b.a(a.x+h/4,a.y+d/2));p.push(m);p.push(n);p.push(l);p.push(k);p.push(e);p.push(c);h=b.c.w(p,!1);d=h.pop();a=h.pop();d=b.b.f(a,d);for(a=0;a<d.length;a++)h.push(d[a]);g.push(h);return g};b.b.Ka=function(a,d){var c=a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(c=a[1].x,g=a[0].x);a[0].y>a[1].y&&(e=a[1].y,h=a[0].y);a=new b.a(c,e);g=new b.a(g,h);h=new b.a(g.x,a.y);var k=new b.a(a.x,g.y),l=[];l.push(a);l.push(k);l.push(g);l.push(h);l.push(a);a=b.b.I(l);g=d[0];d=d[1];c=new b.a(c+30,e+5);
e=new b.a(c.x-d/2,c.y+d/2);h=new b.a(c.x,c.y+d);k=new b.a(h.x-d/2,h.y+d/2);l=[];l.push(c);l.push(e);l.push(h);a.push(l);h=b.b.f(h,k);a.push(h);c=new b.a(c.x+5,e.y);e=b.b.f(new b.a(c.x+g,c.y),c);a.push(e);e=new b.a(c.x+g/2+10,c.y-d/2);h=new b.a(c.x+g/2+10,c.y+d/2);k=[];k.push(e);k.push(h);a.push(k);g=b.b.m(new b.a(c.x+g/4,e.y),new b.a(c.x+g/4,h.y),new b.a(c.x+g/4+d/2,(h.y+e.y)/2));a.push(g);return a};b.b.La=function(a,d){var c=a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(c=a[1].x,g=a[0].x);a[0].y>
a[1].y&&(e=a[1].y,h=a[0].y);a=new b.a(c,e);c=new b.a(g,h);g=new b.a(c.x,a.y);h=new b.a(a.x,c.y);e=[];e.push(a);e.push(h);e.push(c);e.push(g);e.push(a);g=b.b.I(e);h=d[0];d=d[1];a=b.a.f(a,c,.5);c=b.b.f(new b.a(a.x,a.y-d/2),new b.a(a.x-h-10,a.y-d/2));g.push(c);c=new b.a(a.x-h/2,a.y);e=[];e.push(new b.a(a.x-h/2,a.y-d));e.push(c);g.push(e);d=b.b.m(new b.a(a.x-3*h/4-d/2,a.y-d),new b.a(a.x-3*h/4-d/2,a.y),new b.a(a.x-3*h/4,a.y-d/2));g.push(d);return g};b.b.ha=function(a){a=b.b.m(a[0],a[2],a[1]);a.pop();a.pop();
var c=a.pop(),f=a.pop();c=b.b.f(f,c);for(f=0;f<c.length;f++)a.push(c[f]);return a};b.b.Ma=function(a,d){var c=a[0];2==a.length&&(c=b.a.f(a[0],a[1],.5));a=d[0];d=d[1];var e=new b.a(c.x-a/2,c.y),g=new b.a(c.x+a/2,c.y),h=new b.a(c.x,c.y-d/2),k=new b.a(c.x,c.y+d/2);d=[];var l=[];l.push(e);l.push(h);l.push(g);h=b.b.ha(l);d.push(h);l[0]=g;l[1]=k;l[2]=e;h=b.b.ha(l);d.push(h);e=new b.a(e.x-10,c.y);e=b.b.f(new b.a(e.x-a,c.y),e);d.push(e);g=new b.a(g.x+10,c.y);c=b.b.f(new b.a(g.x+a,c.y),g);d.push(c);return d};
b.b.Oa=function(a,d,f){var c=null,g=new b.K;if(2001==a){if(4>d.length)return;c=b.b.ia(d[0],d[1],d[3],d[2],g)}else if(2003==a)c=b.b.L(d[0],d[1],g,.125,.5);else if(2004==a)g.l=.8*b.a.g(d[0],d[1]),g.F=0,c=b.b.L(d[0],d[1],g,.35,.8);else if(2005==a)c=b.b.N(d[0],d[1],d[2],g,!1);else if(2006==a)c=b.b.N(d[0],d[1],d[2],g,!0);else if(2007==a)c=b.b.ga(d,g);else if(2008==a)c=b.b.w(d,!0);else if(2011==a)c=b.b.la(d[0],d[1],d[2]);else{if(2031==a)return c=b.b.m(d[0],d[1],d[2]),[c];if(2032==a)c=b.b.I(d);else if(2033==
a)c=b.b.Y(d,f);else if(2034==a)c=b.b.Na(d);else if(2035==a)c=b.b.Ca(d,f[0]);else if(2036==a)c=b.b.Da(d,f[0]);else if(2037==a)c=b.b.Ea(d,f[0]);else if(2038==a)c=b.b.Ga(d,f[0]);else if(2039==a)c=b.b.Ha(d,f[0]);else if(2040==a)c=b.b.Ia(d,f[0]);else if(2041==a)c=b.b.Ja(d,f);else if(2042==a)c=b.b.Ka(d,f);else if(2043==a)c=b.b.La(d,f);else if(2044==a)c=b.b.Ma(d,f);else if(2052==a)c=b.b.I(d);else if(2053==a)c=b.b.Y(d,f);else if(2054==a)c=b.b.Y(d,f);else if(2055==a||2056==a||2057==a)return c=b.b.m(d[0],d[1],
d[2]),[c]}return c};window.H5JB_getJBArray=function(a,d,f){for(var c=[],g=0;g<d.length;g+=2)c.push(new b.a(d[g],d[g+1]));return b.b.Oa(a,c,f)}})();function pointDistance(a,b){var c=b.x-a.x;a=b.y-a.y;return Math.sqrt(c*c+a*a)}var R=6371E3;function distanceBetween(a,b){var c=Math.PI/180,d=Math.sin((b.lat-a.lat)*c/2),f=Math.sin((b.lng-a.lng)*c/2);a=d*d+Math.cos(a.lat*c)*Math.cos(b.lat*c)*f*f;return 2*R*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function computeSegmentHeading(a,b){return(180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI+450)%360}function asRatioToPathLength(a,b){var c=a.value;return a.isInPixels?c/b:c}
function parseRelativeOrAbsoluteValue(a){if("string"===typeof a&&-1!==a.indexOf("%"))return{value:parseFloat(a)/100,isInPixels:!1};a=a?parseFloat(a):0;return{value:a,isInPixels:0<a}}function pointsEqual(a,b){return a.x===b.x&&a.y===b.y}function pointsToSegments(a){return a.reduce(function(a,c,d,f){if(0<d&&!pointsEqual(c,f[d-1])){d=f[d-1];f=0<a.length?a[a.length-1].distB:0;var b=pointDistance(d,c);a.push({a:d,b:c,distA:f,distB:f+b,heading:computeSegmentHeading(d,c)})}return a},[])}
function projectPatternOnPointPath(a,b){var c=pointsToSegments(a),d=c.length;if(0===d)return[];a=c[d-1].distB;var f=asRatioToPathLength(b.offset,a),e=asRatioToPathLength(b.endOffset,a);b=asRatioToPathLength(b.repeat,a);b*=a;e=0<e?a*e:0;var g=[];f=0<f?a*f:0;do g.push(f),f+=b;while(0<b&&f<a-e);var h=0,k=c[0];return g.map(function(a){for(;a>k.distB&&h<d-1;)h++,k=c[h];return{pt:interpolateBetweenPoints(k.a,k.b,(a-k.distA)/(k.distB-k.distA)),heading:k.heading}})}
function interpolateBetweenPoints(a,b,c){return b.x!==a.x?{x:a.x+c*(b.x-a.x),y:a.y+c*(b.y-a.y)}:{x:a.x,y:a.y+(b.y-a.y)*c}}GMap.Symbol=GMap.Symbol||{};
GMap.Symbol.Dash=GMap.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(a){GMap.Util.setOptions(this,a);this.options.pathOptions.clickable=!1},buildSymbol:function(a,b,c,d,f){b=this.options;d=Math.PI/180;if(-1==b.pixelSize)return GMap.polyline([a.latLng,a.latLng],b.pathOptions);if(0==b.pixelSize)return f=c.project(a.latLng),a=-(a.heading-90)*d,a=GMap.point(f.x+10*Math.cos(a-1*Math.PI/3-Math.PI/2)/2,f.y+10*Math.sin(a-1*Math.PI/3-Math.PI/2)/2),d=f.add(f.subtract(a)),GMap.polyline([c.unproject(a),
c.unproject(d)],b.pathOptions);if(1==b.pixelSize)return f=c.project(a.latLng),a=-(a.heading-90)*d,a=GMap.point(f.x+10*Math.cos(a-Math.PI/3)/2,f.y+10*Math.sin(a-Math.PI/3)/2),d=f.add(f.subtract(a)),GMap.polyline([c.unproject(a),c.unproject(d)],b.pathOptions);f=c.project(a.latLng);a=-(a.heading-90)*d;a=GMap.point(f.x+b.pixelSize*Math.cos(a+Math.PI)/2,f.y+b.pixelSize*Math.sin(a)/2);d=f.add(f.subtract(a));return GMap.polyline([c.unproject(a),c.unproject(d)],b.pathOptions)}});GMap.Symbol.dash=function(a){return new GMap.Symbol.Dash(a)};
GMap.Symbol.ArrowHead=GMap.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(a){GMap.Util.setOptions(this,a);this.options.pathOptions.clickable=!1},buildSymbol:function(a,b,c,d,f){return this.options.polygon?GMap.polygon(this._buildArrowPath(a,c),this.options.pathOptions):GMap.polyline(this._buildArrowPath(a,c),this.options.pathOptions)},_buildArrowPath:function(a,b){var c=Math.PI/180,d=b.project(a.latLng),f=-(a.heading-90)*c,e=this.options.headAngle/
2*c;c=f+e;f-=e;c=GMap.point(d.x-this.options.pixelSize*Math.cos(c),d.y+this.options.pixelSize*Math.sin(c));d=GMap.point(d.x-this.options.pixelSize*Math.cos(f),d.y+this.options.pixelSize*Math.sin(f));return[b.unproject(c),a.latLng,b.unproject(d)]}});GMap.Symbol.arrowHead=function(a){return new GMap.Symbol.ArrowHead(a)};
GMap.Symbol.Marker=GMap.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(a){GMap.Util.setOptions(this,a);this.options.markerOptions.clickable=!1;this.options.markerOptions.draggable=!1},buildSymbol:function(a,b,c,d,f){this.options.rotate&&(this.options.markerOptions.rotationAngle=a.heading+(this.options.angleCorrection||0));return GMap.marker(a.latLng,this.options.markerOptions)}});GMap.Symbol.marker=function(a){return new GMap.Symbol.Marker(a)};
function isCoord(a){return a instanceof GMap.LatLng||Array.isArray(a)&&2===a.length&&"number"===typeof a[0]}var isCoordArray=function(a){return Array.isArray(a)&&isCoord(a[0])};
GMap.PolylineSymbol=GMap.FeatureGroup.extend({options:{patterns:[]},initialize:function(a,b){GMap.FeatureGroup.prototype.initialize.call(this);GMap.Util.setOptions(this,b);this._map=null;this._paths=this._initPaths(a);this._bounds=this._initBounds();this._patterns=this._initPatterns(this.options.patterns);this._lineLayers=[]},_initPaths:function(a,b){var c=this;return isCoordArray(a)?[b?a.concat([a[0]]):a]:a instanceof GMap.Polyline?this._initPaths(a.getLatLngs(),a instanceof GMap.Polygon):Array.isArray(a)?
a.reduce(function(a,f){return a.concat(c._initPaths(f,b))},[]):[]},_initPatterns:function(a){return a.map(this._parsePatternDef)},setPatterns:function(a){this.options.patterns=a;this._patterns=this._initPatterns(this.options.patterns);this.redraw()},setPaths:function(a){this._paths=this._initPaths(a);this._bounds=this._initBounds();this.redraw()},_parsePatternDef:function(a,b){return{symbolFactory:a.symbol,offset:parseRelativeOrAbsoluteValue(a.offset),endOffset:parseRelativeOrAbsoluteValue(a.endOffset),
repeat:parseRelativeOrAbsoluteValue(a.repeat)}},onAdd:function(a){this._map=a;this._draw();this._map.on("moveend",this.redraw,this)},onRemove:function(a){this._map.off("moveend",this.redraw,this);this._map=null;GMap.FeatureGroup.prototype.onRemove.call(this,a)},_initBounds:function(){var a=this._paths.reduce(function(a,c){return a.concat(c)},[]);return GMap.latLngBounds(a)},getBounds:function(){return this._bounds},_buildSymbols:function(a,b,c){var d=this;return c.map(function(f,e){return b.buildSymbol(f,
a,d._map,e,c.length)})},_getDirectionPoints:function(a,b){var c=this;if(2>a.length)return[];a=a.map(function(a){return c._map.project(a)});return projectPatternOnPointPath(a,b).map(function(a){return{latLng:c._map.unproject(GMap.point(a.pt)),heading:a.heading}})},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(a){var b=this,c=this._map.getBounds().pad(.1);return this._paths.map(function(d){var f=b._getDirectionPoints(d,a).filter(function(a){return c.contains(a.latLng)});
return GMap.featureGroup(b._buildSymbols(d,a.symbolFactory,f))})},_draw:function(){var a=this;this._patterns.map(function(b){return a._getPatternLayers(b)}).forEach(function(b){a.addLayer(GMap.featureGroup(b))})}});GMap.polylineSymbol=function(a,b){return new GMap.PolylineSymbol(a,b)};
var pat1=[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})}],pat2=[{offset:0,repeat:10,symbol:GMap.Symbol.dash({pixelSize:-1})}],pat3=[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:-1})}],g_patterns=[pat1,pat2,pat3];
GMap.PolylineJBSymbol=GMap.FeatureGroup.extend({_editIcon:GMap.divIcon({className:"gmap-div-icon gmap-editing-icon"}),options:{},_setControlLatLngs:function(a){this._controlLatLngs=a},_bindMapClick:function(){this._map.on("click",this._onMapClick,this)},_unbindMapClick:function(){this._map.off("click",this._onMapClick,this)},_onMapClick:function(a){},_getNewMarker:function(a,b){return new GMap.marker(a,b)},_addNewMarker:function(a){a=this._getNewMarker(a.latlng,{icon:this._editIcon});this._addToMapAndBindMarker(a);
this._lineMarkers.push(a)},_unbindMarkerEvents:function(a){a.off("drag",this._replot,this);a.dragging.disable()},_bindMarkerEvents:function(a){a.on("drag",this._replot,this);a.dragging.enable()},_addToMapAndBindMarker:function(a){a.addTo(this._map);this.options.readOnly||this._bindMarkerEvents(a)},setCtrlVisible:function(a){var b="block";1==a&&(b="none");for(a=0;a<this._lineMarkers.length;a++)this._lineMarkers[a]._icon.style.display=b},setReadOnly:function(a){this.setCtrlVisible(a);if(a&&!this.options.readOnly){var b=
"_unbindMarkerEvents";this._unbindMapClick()}else!a&&this.options.readOnly&&(b="_bindMarkerEvents",this._bindMapClick());if("undefined"!==typeof b)for(index in this.options.readOnly=a,this._lineMarkers)this[b](this._lineMarkers[index])},_replot:function(){this._redraw()},_plotExisting:function(){for(var a=0;a<this._controlLatLngs.length;a++)this._addNewMarker({latlng:this._controlLatLngs[a]});this._replot()},clear:function(){this._map&&this.clearLayers()},_redraw:function(){for(var a=[],b=0;b<this._lineMarkers.length;b++){var c=
this._lineMarkers[b].getLatLng();a.push([c.lat,c.lng])}this._paths=this._initPaths(a);this._setControlLatLngs(a);this.redraw()},initialize:function(a,b){GMap.FeatureGroup.prototype.initialize.call(this);GMap.Util.setOptions(this,b);this._map=null;this._paths=this._initPaths(a);this._controlLatLngs=[];this._lineMarkers=[];this._setControlLatLngs(a);this._bounds=this._initBounds();this._keyid=this.options.keyid;this._style={};this._style._patterns=this.options.patterns;this._style._patternid=this.options.patternid;
this._style.fill=this.options.color;this._style.stroke=this.options.color;this._style._colors=this.options.colors;this._style.strokeWidth=this.options.weight;this._style.line=this.options.weight;this._style.outlineOpacity=null!=this.options.outlineOpacity?this.options.outlineOpacity:1;this._sizeArray=null!=this.options.sizeArray?this.options.sizeArray:[[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[100,40],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60]]},_initPaths:function(a,
b){var c=this;return isCoordArray(a)?[b?a.concat([a[0]]):a]:a instanceof GMap.Polyline?this._initPaths(a.getLatLngs(),a instanceof GMap.Polygon):Array.isArray(a)?a.reduce(function(a,f){return a.concat(c._initPaths(f,b))},[]):[]},setPaths:function(a){this._paths=this._initPaths(a);this._bounds=this._initBounds();this.redraw()},onAdd:function(a){this._map=a;this._draw();this._map.on("moveend",this.redraw,this);this._plotExisting();this.options.readOnly||this._bindMapClick();this.setCtrlVisible(this.options.readOnly)},
onRemove:function(a){this._map.off("moveend",this.redraw,this);GMap.FeatureGroup.prototype.onRemove.call(this,a);for(var b in this._lineMarkers)this._map.removeLayer(this._lineMarkers[b]);this._lineMarkers=[];this._unbindMapClick();this._map=null},_initBounds:function(){var a=this._paths.reduce(function(a,c){return a.concat(c)},[]);return GMap.latLngBounds(a)},getBounds:function(){return this._bounds},redraw:function(){if(this._map){this.clearLayers();for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].off("click",
this._symbolClick,this);this._draw()}},_symbolClick:function(a){alert("clicked:"+this._keyid);this._map.drawHelper.showEditPage(1,this._keyid,this)},_getPatternLayers:function(){var a=this;this._map.getBounds().pad(.1);var b={color:a._style.stroke,weight:a._style.strokeWidth,opacity:a._style.outlineOpacity};return this._paths.map(function(c){c=a._getPolyFromPos(a._keyid,c);for(var d=[],f=0;f<c.length;f++)if(2031==a._keyid||2055==a._keyid||2056==a._keyid||2057==a._keyid)if(null==a._style._patterns)d.push(GMap.polyline(c[f],
b));else{var e=GMap.polylineSymbol(c[f],{patterns:a._style._patterns});d.push(e)}else if(2032==a._keyid||2034==a._keyid||2052==a._keyid)d.push(GMap.polyline(c[f],b));else if(2033==a._keyid||2053==a._keyid||2054==a._keyid)d.push(GMap.polyline(c[f],b)),f!=c.length-1&&(e=[],e.push(c[f][c[f].length-1]),e.push(c[f+1][0]),e=GMap.polylineSymbol(e,{patterns:a._style._patterns}),d.push(e));else if(2035==a._keyid||2036==a._keyid||2037==a._keyid||2038==a._keyid)0==f?(e=distanceBetween(c[f][0],c[f][1]),e=GMap.circle(c[f][0],
{radius:e,fill:!1,color:a._style.stroke,weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}),d.push(e)):d.push(GMap.polyline(c[f],b));else if(2039==a._keyid)4>f?(e=distanceBetween(c[f][0],c[f][1]),e=GMap.circle(c[f][0],{radius:e,fill:!1,color:a._style.stroke,weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}),d.push(e)):d.push(GMap.polyline(c[f],b));else if(2040==a._keyid)if(0==f%6)e=distanceBetween(c[f][0],c[f][1]),e=GMap.circle(c[f][0],{radius:e,fill:!1,color:a._style.stroke,
weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}),d.push(e);else if(5!=f%6)d.push(GMap.polyline(c[f],b));else if(null==a._style._patterns)d.push(GMap.polyline(c[f],b));else{e=a._style._patterns;for(var g=0;g<e.length;g++)e[g].symbol.options.pathOptions.color=a._style.stroke;b.patterns=e;e=GMap.polylineSymbol(c[f],b);d.push(e)}else 2041==a._keyid?d.push(GMap.polyline(c[f],b)):2042==a._keyid||2043==a._keyid?d.push(GMap.polyline(c[f],b)):2044==a._keyid&&d.push(GMap.polyline(c[f],{color:a._style._colors[f%
2],weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}));return GMap.featureGroup(d)})},_getPolyFromPos:function(a,b){var c=[],d=b.length,f;var e=[];for(f=0;f<d;f++)e[f]=this._map.latLngToLayerPoint(b[f]);d=!1;f=[];var g=[25];if(2031==a||2055==a||2056==a||2057==a){if(3<=e.length){for(d=0;3>d;d++)f.push(e[d].x),f.push(e[d].y);d=!0}}else if(2032==a||2033==a||2052==a||2053==a||2054==a){if(3<=e.length){for(d=0;d<e.length;d++)f.push(e[d].x),f.push(e[d].y);d=!0}}else if(2034==a){if(2<=e.length){for(d=
0;2>d;d++)f.push(e[d].x),f.push(e[d].y);d=!0}}else if(2035==a||2036==a||2037==a||2038==a||2039==a||2040==a||2041==a||2042==a||2043==a||2044==a){for(d=0;d<e.length;d++)f.push(e[d].x),f.push(e[d].y);d=!0}if(1==d){if(2041==a||2042==a||2043==a||2044==a)d=this._map.getZoom(),d=this._sizeArray[d],g[0]=d[0],g[1]=d[1];b=H5JB_getJBArray(a,f,g);e=[];if(2030>a){for(d=0;d<b.length;d++)a=this._map.layerPointToLatLng(b[d]),c.push(a);e.push(c)}else for(d=0;d<b.length;d++){c=[];f=b[d];for(g=0;g<f.length;g++)a=this._map.layerPointToLatLng(f[g]),
c.push(a);e.push(c)}return e}return b},_draw:function(){this._lineLayers=this._getPatternLayers();for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].on("click",this._symbolClick,this);this.addLayer(GMap.featureGroup(this._lineLayers))},_setStyle:function(a){this._style.stroke=a.outlineColor;this._style.strokeWidth=a.outlineWidth;this._style.outlineOpacity=a.opacity;this._style._patterns="dash"==a.lineType?g_patterns[0]:"point"==a.lineType?g_patterns[1]:"ptline"==a.lineType?g_patterns[2]:
null;if(null!=this._style._patterns){a=this._style._patterns;for(var b=0;b<a.length;b++)a[b].symbol.options.pathOptions.color=this._style.stroke,a[b].symbol.options.pathOptions.weight=this._style.strokeWidth}this.redraw()}});GMap.polylineJBSymbol=function(a,b){return new GMap.PolylineJBSymbol(a,b)};
GMap.PointJBSymbol=GMap.FeatureGroup.extend({_editIcon:GMap.divIcon({className:"gmap-div-icon gmap-editing-icon"}),options:{},_setControlLatLngs:function(a){this._controlLatLngs=a},_bindMapClick:function(){this._map.on("click",this._onMapClick,this)},_unbindMapClick:function(){this._map.off("click",this._onMapClick,this)},_onMapClick:function(a){},_getNewMarker:function(a,b){return new GMap.marker(a,b)},_addNewMarker:function(a){a=this._getNewMarker(a.latlng,{icon:this._editIcon});this._addToMapAndBindMarker(a);
this._lineMarkers.push(a)},_unbindMarkerEvents:function(a){a.off("drag",this._replot,this);a.dragging.disable()},_bindMarkerEvents:function(a){a.on("drag",this._replot,this);a.dragging.enable()},_addToMapAndBindMarker:function(a){a.addTo(this._map);this.options.readOnly||this._bindMarkerEvents(a)},_replot:function(){this._redraw()},_plotExisting:function(){for(var a=0;a<this._controlLatLngs.length;a++)this._addNewMarker({latlng:this._controlLatLngs[a]});this._replot()},clear:function(){this._map&&
this.clearLayers()},_redraw:function(){for(var a=[],b=0;b<this._lineMarkers.length;b++){var c=this._lineMarkers[b].getLatLng();a.push([c.lat,c.lng])}this._paths=this._initPaths(a);this._setControlLatLngs(a);this.redraw()},initialize:function(a,b){GMap.FeatureGroup.prototype.initialize.call(this);GMap.Util.setOptions(this,b);this._map=null;this._paths=this._initPaths(a);this._controlLatLngs=[];this._lineMarkers=[];this._setControlLatLngs(a);this._bounds=this._initBounds();this._keyid=this.options.keyid;
this._patterns=this.options.patterns;this._color=this.options.color;this._colors=this.options.colors;this._weight=this.options.weight;this._sizeArray=null!=this.options.sizeArray?this.options.sizeArray:[[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[100,40],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60]]},_initPaths:function(a,b){var c=this;return isCoordArray(a)?[b?a.concat([a[0]]):a]:a instanceof GMap.Polyline?this._initPaths(a.getLatLngs(),a instanceof GMap.Polygon):
Array.isArray(a)?a.reduce(function(a,f){return a.concat(c._initPaths(f,b))},[]):[]},setPaths:function(a){this._paths=this._initPaths(a);this._bounds=this._initBounds();this.redraw()},onAdd:function(a){this._map=a;this._draw();this._map.on("moveend",this.redraw,this);this._plotExisting();this.options.readOnly||this._bindMapClick()},onRemove:function(a){this._map.off("moveend",this.redraw,this);GMap.FeatureGroup.prototype.onRemove.call(this,a);for(var b in this._lineMarkers)this._map.removeLayer(this._lineMarkers[b]);
this._lineMarkers=[];this._unbindMapClick();this._map=null},_initBounds:function(){var a=this._paths.reduce(function(a,c){return a.concat(c)},[]);return GMap.latLngBounds(a)},getBounds:function(){return this._bounds},redraw:function(){if(this._map){this.clearLayers();for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].off("click",this._symbolClick,this);this._draw()}},_symbolClick:function(a){alert("clicked:"+this._keyid);this._map.drawHelper.showEditPage(0,this._keyid,this)},_getPatternLayers:function(){var a=
this;this._map.getBounds().pad(.1);return this._paths.map(function(b){b=a._getPolyFromPos(a._keyid,b);for(var c=[],d=0;d<b.length;d++)c.push(GMap.polyline(b[d],{color:a._colors[d%2],weight:a._weight}));return GMap.featureGroup(c)})},_getPolyFromPos:function(a,b){a=b.length;var c;for(c=0;c<a;c++)this._map.latLngToLayerPoint(b[c])},_draw:function(){this._lineLayers=this._getPatternLayers();for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].on("click",this._symbolClick,this);this.addLayer(GMap.featureGroup(this._lineLayers))}});
GMap.pointJBSymbol=function(a,b){return new GMap.PointJBSymbol(a,b)};GMap.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1E-4};GMap.PlotUtils={};GMap.PlotUtils.distance=function(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))};GMap.PlotUtils.wholeDistance=function(a){for(var b=0,c=0;c<a.length-1;c++)b+=GMap.PlotUtils.distance(a[c],a[c+1]);return b};GMap.PlotUtils.getBaseLength=function(a){return Math.pow(GMap.PlotUtils.wholeDistance(a),.99)};GMap.PlotUtils.mid=function(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2]};
GMap.PlotUtils.getCircleCenterOfThreePoints=function(a,b,c){var d=[(a[0]+b[0])/2,(a[1]+b[1])/2],f=[(a[0]+c[0])/2,(a[1]+c[1])/2];return GMap.PlotUtils.getIntersectPoint(d,[d[0]-a[1]+b[1],d[1]+a[0]-b[0]],f,[f[0]-a[1]+c[1],f[1]+a[0]-c[0]])};
GMap.PlotUtils.getIntersectPoint=function(a,b,c,d){if(a[1]==b[1])return d=(d[0]-c[0])/(d[1]-c[1]),b=d*(a[1]-c[1])+c[0],c=a[1],[b,c];if(c[1]==d[1])return b=(b[0]-a[0])/(b[1]-a[1]),b=b*(c[1]-a[1])+a[0],c=c[1],[b,c];b=(b[0]-a[0])/(b[1]-a[1]);d=(d[0]-c[0])/(d[1]-c[1]);c=(b*a[1]-a[0]-d*c[1]+c[0])/(b-d);b=b*c-b*a[1]+a[0];return[b,c]};
GMap.PlotUtils.getAzimuth=function(a,b){var c,d=Math.asin(Math.abs(b[1]-a[1])/GMap.PlotUtils.distance(a,b));b[1]>=a[1]&&b[0]>=a[0]?c=d+Math.PI:b[1]>=a[1]&&b[0]<a[0]?c=GMap.Constants.TWO_PI-d:b[1]<a[1]&&b[0]<a[0]?c=d:b[1]<a[1]&&b[0]>=a[0]&&(c=Math.PI-d);return c};GMap.PlotUtils.getAngleOfThreePoints=function(a,b,c){a=GMap.PlotUtils.getAzimuth(b,a)-GMap.PlotUtils.getAzimuth(b,c);return 0>a?a+GMap.Constants.TWO_PI:a};
GMap.PlotUtils.isClockWise=function(a,b,c){return(c[1]-a[1])*(b[0]-a[0])>(b[1]-a[1])*(c[0]-a[0])};GMap.PlotUtils.getPointOnLine=function(a,b,c){return[b[0]+a*(c[0]-b[0]),b[1]+a*(c[1]-b[1])]};GMap.PlotUtils.getCubicValue=function(a,b,c,d,f){a=Math.max(Math.min(a,1),0);var e=1-a,g=a*a,h=g*a,k=e*e,l=k*e;return[l*b[0]+3*k*a*c[0]+3*e*g*d[0]+h*f[0],l*b[1]+3*k*a*c[1]+3*e*g*d[1]+h*f[1]]};
GMap.PlotUtils.getThirdPoint=function(a,b,c,d,f){a=GMap.PlotUtils.getAzimuth(a,b);c=f?a+c:a-c;return[b[1]+d*Math.sin(c),b[0]+d*Math.cos(c)]};GMap.PlotUtils.getArcPoints=function(a,b,c,d){var f=[],e=d-c;e=0>e?e+GMap.Constants.TWO_PI:e;for(var g=0;g<=GMap.Constants.FITTING_COUNT;g++){var h=c+e*g/GMap.Constants.FITTING_COUNT;d=a[0]+b*Math.cos(h);h=a[1]+b*Math.sin(h);f.push([d,h])}return f};
GMap.PlotUtils.getBisectorNormals=function(a,b,c,d){var f=GMap.PlotUtils.getNormal(b,c,d),e=Math.sqrt(f[0]*f[0]+f[1]*f[1]),g=f[0]/e;f=f[1]/e;var h=GMap.PlotUtils.distance(b,c),k=GMap.PlotUtils.distance(c,d);e>GMap.Constants.ZERO_TOLERANCE?GMap.PlotUtils.isClockWise(b,c,d)?(d=a*h,e=c[0]-d*f,h=c[1]+d*g,b=[e,h],d=a*k,e=c[0]+d*f,h=c[1]-d*g,a=[e,h]):(d=a*h,e=c[0]+d*f,h=c[1]-d*g,b=[e,h],d=a*k,e=c[0]-d*f,h=c[1]+d*g,a=[e,h]):(e=c[0]+a*(b[0]-c[0]),h=c[1]+a*(b[1]-c[1]),b=[e,h],e=c[0]+a*(d[0]-c[0]),h=c[1]+a*
(d[1]-c[1]),a=[e,h]);return[b,a]};GMap.PlotUtils.getNormal=function(a,b,c){var d=a[0]-b[0];a=a[1]-b[1];var f=Math.sqrt(d*d+a*a),e=c[0]-b[0];b=c[1]-b[1];c=Math.sqrt(e*e+b*b);return[d/f+e/c,a/f+b/c]};GMap.PlotUtils.pointsTolatlngs=function(a){for(var b=[],c=a.length,d=0;d<c;d++)b.push([a[d][1],a[d][0]]);return b};
GMap.Curve2=GMap.Polyline.extend({t:.3,initialize:function(a,b){GMap.setOptions(this,b);this.points=a;this._bounds=new GMap.LatLngBounds;this.generate(a)},options:{smoothFactor:1E-5},generate:function(a){var b=a.length;2>b||(this._latlngs=2==b?this._convertLatLngs(GMap.PlotUtils.pointsTolatlngs(a)):this._convertLatLngs(GMap.PlotUtils.pointsTolatlngs(GMap.PlotUtils.getCurvePoints(this.t,a))))},setLatLngs:function(a){this.generate(a);return this.redraw()},_convertLatLngs:function(a){for(var b=[],c=
GMap.Polyline._flat(a),d=0,f=a.length;d<f;d++)c?(b[d]=GMap.latLng(a[d]),this._bounds.extend(b[d])):b[d]=this._convertLatLngs(a[d]);return b}});GMap.curve2=function(a,b){return new GMap.Curve2(a,b)};
GMap.PlotUtils.getCurvePoints=function(a,b){for(var c=[GMap.PlotUtils.getLeftMostControlPoint(b)],d=0;d<b.length-2;d++){var f=b[d],e=b[d+1];f=GMap.PlotUtils.getBisectorNormals(a,f,e,b[d+2]);c=c.concat(f)}a=GMap.PlotUtils.getRightMostControlPoint(b);c.push(a);var g=[];for(d=0;d<b.length-1;d++){f=b[d];e=b[d+1];g.push(f);for(a=0;a<GMap.Constants.FITTING_COUNT;a++){var h=GMap.PlotUtils.getCubicValue(a/GMap.Constants.FITTING_COUNT,f,c[2*d],c[2*d+1],e);g.push(h)}g.push(e)}return g};
GMap.PlotUtils.getLeftMostControlPoint=function(a){var b=a[0],c=a[1],d=a[2];a=GMap.PlotUtils.getBisectorNormals(0,b,c,d)[0];d=GMap.PlotUtils.getNormal(b,c,d);if(Math.sqrt(d[0]*d[0]+d[1]*d[1])>GMap.Constants.ZERO_TOLERANCE){d=GMap.PlotUtils.mid(b,c);var f=b[0]-d[0],e=b[1]-d[1];c=2/GMap.PlotUtils.distance(b,c);b=-c*e;c*=f;f=2*b*c;e=a[0]-d[0];var g=a[1]-d[1];a=d[0]+(b*b-c*c)*e+f*g;d=d[1]+f*e+(c*c-b*b)*g}else a=b[0]+t*(c[0]-b[0]),d=b[1]+t*(c[1]-b[1]);return[a,d]};
GMap.PlotUtils.getRightMostControlPoint=function(a){var b=a.length,c=a[b-3],d=a[b-2];b=a[b-1];a=GMap.PlotUtils.getBisectorNormals(0,c,d,b)[1];c=GMap.PlotUtils.getNormal(c,d,b);if(Math.sqrt(c[0]*c[0]+c[1]*c[1])>GMap.Constants.ZERO_TOLERANCE){c=GMap.PlotUtils.mid(d,b);var f=b[0]-c[0],e=b[1]-c[1];b=2/GMap.PlotUtils.distance(d,b);d=-b*e;b*=f;f=2*d*b;e=a[0]-c[0];var g=a[1]-c[1];a=c[0]+(d*d-b*b)*e+f*g;c=c[1]+f*e+(b*b-d*d)*g}else a=b[0]+t*(d[0]-b[0]),c=b[1]+t*(d[1]-b[1]);return[a,c]};
GMap.PlotUtils.getBezierPoints=function(a){if(2>=a.length)return a;for(var b=[],c=a.length-1,d=0;1>=d;d+=.01){for(var f=y=0,e=0;e<=c;e++){var g=GMap.PlotUtils.getBinomialFactor(c,e),h=Math.pow(d,e),k=Math.pow(1-d,c-e);f+=g*h*k*a[e][0];y+=g*h*k*a[e][1]}b.push([f,y])}b.push(a[c]);return b};GMap.PlotUtils.getBinomialFactor=function(a,b){return GMap.PlotUtils.getFactorial(a)/(GMap.PlotUtils.getFactorial(b)*GMap.PlotUtils.getFactorial(a-b))};
GMap.PlotUtils.getFactorial=function(a){if(1>=a)return 1;if(2==a)return 2;if(3==a)return 6;if(4==a)return 24;if(5==a)return 120;for(var b=1,c=1;c<=a;c++)b*=c;return b};GMap.PlotUtils.getQBSplinePoints=function(a){if(2>=a.length)return a;var b=[],c=a.length-2-1;b.push(a[0]);for(var d=0;d<=c;d++)for(var f=0;1>=f;f+=.05){for(var e=y=0,g=0;2>=g;g++){var h=GMap.PlotUtils.getQuadricBSplineFactor(g,f);e+=h*a[d+g][0];y+=h*a[d+g][1]}b.push([e,y])}b.push(a[a.length-1]);return b};
GMap.PlotUtils.getQuadricBSplineFactor=function(a,b){return 0==a?Math.pow(b-1,2)/2:1==a?(-2*Math.pow(b,2)+2*b+1)/2:2==a?Math.pow(b,2)/2:0};
GMap.Curve3=GMap.Path.extend({options:{},initialize:function(a,b){GMap.setOptions(this,b);this._initialUpdate=!0;this._setPath(a)},getPath:function(){return this._coords},setPath:function(a){this._setPath(a);return this.redraw()},getBounds:function(){return this._bounds},_setPath:function(a){this._coords=a;this._bounds=this._computeBounds()},_computeBounds:function(){for(var a=new GMap.LatLngBounds,b,c,d,f=0;f<this._coords.length;f++)if(d=this._coords[f],"string"==typeof d||d instanceof String)c=
d;else if("H"==c)a.extend([b.lat,d[0]]),b=new GMap.latLng(b.lat,d[0]);else if("V"==c)a.extend([d[0],b.lng]),b=new GMap.latLng(d[0],b.lng);else if("C"==c){var e=new GMap.latLng(d[0],d[1]);d=this._coords[++f];var g=new GMap.latLng(d[0],d[1]);d=this._coords[++f];d=new GMap.latLng(d[0],d[1]);a.extend(e);a.extend(g);a.extend(d);d.controlPoint1=e;d.controlPoint2=g;b=d}else if("S"==c){g=new GMap.latLng(d[0],d[1]);d=this._coords[++f];d=new GMap.latLng(d[0],d[1]);e=b;if(b.controlPoint2){e=b.lat-b.controlPoint2.lat;
var h=b.lng-b.controlPoint2.lng;e=new GMap.latLng(b.lat+e,b.lng+h)}a.extend(e);a.extend(g);a.extend(d);d.controlPoint1=e;d.controlPoint2=g;b=d}else"Q"==c?(g=new GMap.latLng(d[0],d[1]),d=this._coords[++f],d=new GMap.latLng(d[0],d[1]),a.extend(g),a.extend(d),d.controlPoint=g,b=d):"T"==c?(d=new GMap.latLng(d[0],d[1]),g=b,b.controlPoint&&(e=b.lat-b.controlPoint.lat,h=b.lng-b.controlPoint.lng,g=new GMap.latLng(b.lat+e,b.lng+h)),a.extend(g),a.extend(d),d.controlPoint=g,b=d):(a.extend(d),b=new GMap.latLng(d[0],
d[1]));return a},getCenter:function(){return this._bounds.getCenter()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updatecurve(this)},_project:function(){this._points=[];for(var a=0;a<this._coords.length;a++){var b=this._coords[a];if("string"==typeof b||b instanceof String){this._points.push(b);var c=b}else{switch(b.length){case 2:var d=this._map.latLngToLayerPoint(b);var f=b;break;case 1:"H"==c?(d=this._map.latLngToLayerPoint([f[0],b[0]]),f=[f[0],b[0]]):
(d=this._map.latLngToLayerPoint([b[0],f[1]]),f=[b[0],f[1]])}this._points.push(d)}}},_curvePointsToPath:function(a){for(var b,c,d="",f=0;f<a.length;f++)if(b=a[f],"string"==typeof b||b instanceof String)c=b,d+=c;else switch(c){case "H":d+=b.x+" ";break;case "V":d+=b.y+" ";break;default:d+=b.x+","+b.y+" "}return d||"M0 0"},_containsPoint:function(a){return this._bounds.contains(this._map.layerPointToLatLng(a))}});GMap.curve3=function(a,b){return new GMap.Curve3(a,b)};
GMap.SVG.include({_updatecurve:function(a){this._setPath(a,a._curvePointsToPath(a._points));if(a.options.animate){var b=a._path,c=b.getTotalLength();a.options.dashArray||(b.style.strokeDasharray=c+" "+c);a._initialUpdate&&(b.animate([{strokeDashoffset:c},{strokeDashoffset:0}],a.options.animate),a._initialUpdate=!1)}}});
GMap.Canvas.include({_updatecurve:function(a){var b=new Path2D(a._curvePointsToPath(a._points));this._curveFillStroke(b,this._ctx,a)},_curveFillStroke:function(a,b,c){var d=c.options;d.fill&&(b.globalAlpha=d.fillOpacity,b.fillStyle=d.fillColor||d.color,b.fill(a,d.fillRule||"evenodd"));d.stroke&&0!==d.weight&&(b.setLineDash&&b.setLineDash(c.options&&c.options._dashArray||[]),b.globalAlpha=d.opacity,b.lineWidth=d.weight,b.strokeStyle=d.color,b.lineCap=d.lineCap,b.lineJoin=d.lineJoin,b.stroke(a))}});
GMap.Draw.H5JBLineSymbol=GMap.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:GMap.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new GMap.DivIcon({iconSize:new GMap.Point(8,8),className:"gmap-div-icon gmap-editing-icon"}),touchIcon:new GMap.DivIcon({iconSize:new GMap.Point(20,20),className:"gmap-div-icon gmap-editing-icon gmap-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4E3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,
fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2E3,factor:1,maxPoints:0},initialize:function(a,b){GMap.Browser.touch&&(this.options.icon=this.options.touchIcon);this.options.drawError.message=GMap.drawLocal.draw.handlers.polyline.error;b&&b.drawError&&(b.drawError=GMap.Util.extend({},this.options.drawError,b.drawError));this.type=GMap.Draw.H5JBLineSymbol.TYPE;GMap.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){GMap.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._markers=[],this._markerGroup=new GMap.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new GMap.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=GMap.marker(this._map.getCenter(),{icon:GMap.divIcon({className:"gmap-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,
this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){GMap.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;
this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,
this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(1>=this._markers.length)){var a=this._markers.pop(),b=this._poly,c=b.getLatLngs(),d=c.splice(-1,1)[0];this._poly.setLatLngs(c);this._markerGroup.removeLayer(a);2>b.getLatLngs().length&&this._map.removeLayer(b);this._vertexChanged(d,!1)}},addVertex:function(a){2<=this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(a)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(a)),
this._poly.addLatLng(a),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(a,!0))},completeShape:function(){1>=this._markers.length||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var a=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs();a=this._poly.newLatLngIntersects(a[a.length-1]);!this.options.allowIntersection&&a||!this._shapeIsValid()?this._showErrorTooltip():
(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(a){var b=this._map.mouseEventToLayerPoint(a.originalEvent),c=this._map.layerPointToLatLng(b);this._currentLatLng=c;this._updateTooltip(c);this._updateGuide(b);this._mouseMarker.setLatLng(c);GMap.DomEvent.preventDefault(a.originalEvent)},_vertexChanged:function(a,b){this._map.fire(GMap.Draw.Event.DRAWVERTEX,
{layers:this._markerGroup});this._updateFinishHandler();this._updateRunningMeasure(a,b);this._clearGuides();this._updateTooltip()},_onMouseDown:function(a){this._clickHandled||this._touchHandled||this._disableMarkers||(this._onMouseMove(a),this._clickHandled=!0,this._disableNewMarkers(),a=a.originalEvent,this._startPoint.call(this,a.clientX,a.clientY))},_startPoint:function(a,b){this._mouseDownOrigin=GMap.point(a,b)},_onMouseUp:function(a){var b=a.originalEvent;this._endPoint.call(this,b.clientX,
b.clientY,a);this._clickHandled=null},_endPoint:function(a,b,c){this._mouseDownOrigin&&(a=GMap.point(a,b).distanceTo(this._mouseDownOrigin),b=this._calculateFinishDistance(c.latlng),1<this.options.maxPoints&&this.options.maxPoints==this._markers.length+1?(this.addVertex(c.latlng),this._finishShape()):10>b&&GMap.Browser.touch?this._finishShape():Math.abs(a)<9*(window.devicePixelRatio||1)&&this.addVertex(c.latlng),this._enableNewMarkers());this._mouseDownOrigin=null},_onTouch:function(a){var b=a.originalEvent;
if(b.touches&&b.touches[0]&&!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){var c=b.touches[0].clientX;b=b.touches[0].clientY;this._disableNewMarkers();this._touchHandled=!0;this._startPoint.call(this,c,b);this._endPoint.call(this,c,b,a);this._touchHandled=null}this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(a){if(0<this._markers.length){if(this.type===GMap.Draw.Polyline.TYPE)var b=this._markers[this._markers.length-
1];else if(this.type===GMap.Draw.Polygon.TYPE)b=this._markers[0];else return Infinity;b=this._map.latLngToContainerPoint(b.getLatLng());a=new GMap.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});a=this._map.latLngToContainerPoint(a.getLatLng());b=b.distanceTo(a)}else b=Infinity;return b},_updateFinishHandler:function(){var a=this._markers.length;if(1<a)this._markers[a-1].on("click",this._finishShape,this);2<a&&this._markers[a-2].off("click",this._finishShape,this)},_createMarker:function(a){a=
new GMap.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});this._markerGroup.addLayer(a);return a},_updateGuide:function(a){var b=this._markers?this._markers.length:0;0<b&&(a=a||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[b-1].getLatLng()),a))},_updateTooltip:function(a){var b=this._getTooltipText();a&&this._tooltip.updatePosition(a);this._errorShown||this._tooltip.updateContent(b)},_drawGuide:function(a,
b){var c=Math.floor(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))),d=this.options.guidelineDistance,f=this.options.maxGuideLineLength;d=c>f?c-f:d;this._guidesContainer||(this._guidesContainer=GMap.DomUtil.create("div","gmap-draw-guides",this._overlayPane));for(;d<c;d+=this.options.guidelineDistance){f=d/c;f={x:Math.floor(a.x*(1-f)+f*b.x),y:Math.floor(a.y*(1-f)+f*b.y)};var e=GMap.DomUtil.create("div","gmap-draw-guide-dash",this._guidesContainer);e.style.backgroundColor=this._errorShown?this.options.drawError.color:
this.options.shapeOptions.color;GMap.DomUtil.setPosition(e,f)}},_updateGuideColor:function(a){if(this._guidesContainer)for(var b=0,c=this._guidesContainer.childNodes.length;b<c;b++)this._guidesContainer.childNodes[b].style.backgroundColor=a},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var a=this.options.showLength;0===this._markers.length?a={text:GMap.drawLocal.draw.handlers.polyline.tooltip.start}:
(a=a?this._getMeasurementString():"",a=1===this._markers.length?{text:GMap.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:GMap.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a});return a},_updateRunningMeasure:function(a,b){var c=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(c-=b?2:1,a=GMap.GeometryUtil.isVersion07x()?a.distanceTo(this._markers[c].getLatLng())*(this.options.factor||1):this._map.distance(a,this._markers[c].getLatLng())*(this.options.factor||
1),this._measurementRunningTotal+=a*(b?1:-1))},_getMeasurementString:function(){var a=this._currentLatLng,b=this._markers[this._markers.length-1].getLatLng();a=GMap.GeometryUtil.isVersion07x()?b&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(b)*(this.options.factor||1):this._measurementRunningTotal||0:b&&a?this._measurementRunningTotal+this._map.distance(a,b)*(this.options.factor||1):this._measurementRunningTotal||0;return GMap.GeometryUtil.readableDistance(a,this.options.metric,this.options.feet,
this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(GMap.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();
this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){1<this._markers.length&&
this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var a=this._poly.getLatLngs(),b=this.options.shapeOptions.keyid;a=2053==b?GMap.polylineJBSymbol(a,{keyid:b,color:"#ff0000",colors:["#ff0000","#0000ff"],weight:2,outlineOpacity:.8,patterns:[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:0,pathOptions:{color:"#000000",weight:2}})},{offset:0,repeat:25,
symbol:GMap.Symbol.dash({pixelSize:1,pathOptions:{color:"#000000",weight:2}})}]}):2054==b?GMap.polylineJBSymbol(a,{keyid:b,color:"#ff0000",colors:["#ff0000","#0000ff"],weight:2,outlineOpacity:.8,patterns:[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})}]}):GMap.polylineJBSymbol(a,{keyid:b,color:"#ff0000",colors:["#ff0000","#0000ff"],weight:2,outlineOpacity:.8});GMap.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}});
GMap.Draw.HandLine=GMap.Draw.SimpleShape.extend({statics:{TYPE:"handline"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,clickable:!0}},initialize:function(a,b){this.type=GMap.Draw.HandLine.TYPE;this.pts=[];GMap.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?(this.pts.push(a),this._shape.setLatLngs(this.pts)):(this._shape=new GMap.Polyline([],this.options.shapeOptions),this._map.addLayer(this._shape),this.pts.push(this._startLatLng))},
_fireCreatedEvent:function(){var a=new GMap.Polyline(this.pts,this.options.shapeOptions);GMap.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_onMouseMove:function(a){a=a.latlng;this._isDrawing&&this._drawShape(a)}});
GMap.Draw.PointSymbol=GMap.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new GMap.Icon.Default,repeatMode:!1,zIndexOffset:2E3},initialize:function(a,b){this.type=GMap.Draw.Marker.TYPE;this._initialLabelText=GMap.drawLocal.draw.handlers.marker.tooltip.start;GMap.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){GMap.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=
GMap.marker(this._map.getCenter(),{icon:GMap.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){GMap.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&
(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(a){a=a.latlng;this._tooltip.updatePosition(a);this._mouseMarker.setLatLng(a);this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",
this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(a){return new GMap.Marker(a,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_onTouch:function(a){this._onMouseMove(a);this._onClick()},_fireCreatedEvent:function(){var a=this._marker.getLatLng(),b=this._marker.options.icon.options.keyid,c=this._marker.options.icon.options.helper,
d=this._marker.options.icon.options.style;a=[a.lat,a.lng];var f=c.drawSymbol(b,d);c=c.geticonAnchorFromStyle(d,b);b=GMap.canvasIcon({canvas:f,iconSize:[d.symbolWidth,d.symbolHeight],iconAnchor:c,keyid:b,style:d,name:this._marker.options.icon.options.name,className:"myMarker"});b=GMap.marker(a,{icon:b,name:this._marker.options.icon.options.name});GMap.Draw.Feature.prototype._fireCreatedEvent.call(this,b)}});
GMap.LabelOverlay=GMap.Layer.extend({initialize:function(a,b,c){this._latlng=a;this._labelDetail=this._label=b;c.labelDetail&&(this._labelDetail=c.labelDetail);GMap.Util.setOptions(this,c);this._isDetail=this._enable=!1},options:{offset:null,cssClass:"label-overlay",labelText:""},onAdd:function(a){this._map=a;this._container||this._initLayout();this._poly=new GMap.Polyline([],this.options.shapeOptions);this._map.addLayer(this._poly);a.getPanes().overlayPane.appendChild(this._container);this._container.childNodes[0].innerHTML=
this._label;a.on("viewreset",this._reset,this);a.on("zoomend",this._reset,this);if(a.options.zoomAnimation&&a.options.markerZoomAnimation)a.on("zoomanim",this._animateZoom,this);GMap.DomEvent.on(this._container,"click",this._showLabel,this);this._reset()},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);a=null===this.options.offset?new GMap.Point(a.x,a.y):new GMap.Point(a.x+this.options.offset.x,a.y-this.options.offset.y);GMap.DomUtil.setPosition(this._container,
a)},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._container);null!=this._poly&&(this._map.removeLayer(this._poly),delete this._poly);a.off("viewreset",this._reset,this);a.off("zoomend",this._reset,this);this._map.off("zoomanim",this._animateZoom,this);GMap.DomEvent.off(this._container,"click",this._showLabel,this)},_reset:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPos(a)},_setPos:function(a){var b=this._container.childNodes[0].offsetHeight;var c=this._container.childNodes[0].offsetWidth;
b=null===this.options.offset?new GMap.Point(a.x,a.y):new GMap.Point(a.x+this.options.offset.x,a.y-this.options.offset.y-b);GMap.DomUtil.setPosition(this._container,b);null!=this._poly&&(c=new GMap.Point(a.x+this.options.offset.x+c,a.y-this.options.offset.y),c=this._map.layerPointToLatLng(c),a=new GMap.Point(a.x+this.options.offset.x/2,a.y-this.options.offset.y),a=this._map.layerPointToLatLng(a),b=[],b.push(this._latlng),b.push(a),b.push(c),this._poly.setLatLngs(b))},_initLayout:function(){var a=document.createElement("div"),
b=document.createElement("span");a.className="mapjb-marker-icon-wrapper mapjb-zoom-animated";b.className="mapjb-marker-iconlabel "+this.options.labelClassName;b.innerHTML=this.options.labelText;a.appendChild(b);return this._container=a},updateLabel:function(a){"DIV"===this._container.nodeName.toUpperCase()&&(this._container.childNodes[0].innerHTML=a,this.options.labelText=a)},setLabelDetail:function(a){this._labelDetail=a},enableClick:function(a){this._enable=a},_showLabel:function(){this._enable=
!0;this._isDetail=this._isDetail?!1:!0;var a=this._label;this._isDetail&&(a=this._labelDetail);this.updateLabel(a);this._reset()}});
GMap.Draw.GSectionLine=GMap.Draw.Polyline.extend({statics:{TYPE:"polyline"},Poly:GMap.Polyline,initialize:function(a,b){GMap.Browser.touch&&(this.options.icon=this.options.touchIcon);this.options.drawError.message=GMap.drawLocal.draw.handlers.polyline.error;b&&b.drawError&&(b.drawError=GMap.Util.extend({},this.options.drawError,b.drawError));this.type=GMap.Draw.H5JBLineSymbol.TYPE;this.callback=b.callback;GMap.Draw.Feature.prototype.initialize.call(this,a,b)},_fireCreatedEvent:function(){var a=new this.Poly(this._poly.getLatLngs(),
this.options.shapeOptions);this.callback&&this.callback(this._poly.getLatLngs(),a)}});var Hotline=function(a){if(!(this instanceof Hotline))return new Hotline(a);this._canvas=a="string"===typeof a?document.getElementById(a):a;this._ctx=a.getContext("2d");this._width=a.width;this._height=a.height;this._weight=5;this._outlineWidth=1;this._outlineColor="black";this._min=0;this._max=1;this._data=[];this.palette({0:"green","0.5":"yellow",1:"red"})};
Hotline.prototype={width:function(a){this._width=a;return this},height:function(a){this._height=a;return this},weight:function(a){this._weight=a;return this},outlineWidth:function(a){this._outlineWidth=a;return this},outlineColor:function(a){this._outlineColor=a;return this},palette:function(a){var b=document.createElement("canvas");ctx=b.getContext("2d");gradient=ctx.createLinearGradient(0,0,0,256);b.width=1;b.height=256;for(var c in a)gradient.addColorStop(c,a[c]);ctx.fillStyle=gradient;ctx.fillRect(0,
0,1,256);this._palette=ctx.getImageData(0,0,1,256).data;return this},min:function(a){this._min=a;return this},max:function(a){this._max=a;return this},data:function(a){this._data=a;return this},add:function(a){this._data.push(a);return this},draw:function(){var a=this._ctx;a.globalCompositeOperation="source-over";a.lineCap="round";this._drawOutline(a);this._drawHotline(a);return this},getRGBForValue:function(a){a=4*Math.floor(256*Math.min(Math.max((a-this._min)/(this._max-this._min),0),.999));return[this._palette[a],
this._palette[a+1],this._palette[a+2]]},_drawOutline:function(a){var b,c;if(this._outlineWidth){var d=0;for(b=this._data.length;d<b;d++){var f=this._data[d];a.lineWidth=this._weight+2*this._outlineWidth;var e=1;for(c=f.length;e<c;e++){var g=f[e-1];var h=f[e];a.strokeStyle=this._outlineColor;a.beginPath();a.moveTo(g.x,g.y);a.lineTo(h.x,h.y);a.stroke()}}}},_drawHotline:function(a){var b,c;a.lineWidth=this._weight;var d=0;for(b=this._data.length;d<b;d++){var f=this._data[d];var e=1;for(c=f.length;e<
c;e++){var g=f[e-1];var h=f[e];var k=a.createLinearGradient(g.x,g.y,h.x,h.y);var l=this.getRGBForValue(g.z);var n=this.getRGBForValue(h.z);k.addColorStop(0,"rgb("+l.join(",")+")");k.addColorStop(1,"rgb("+n.join(",")+")");a.strokeStyle=k;a.beginPath();a.moveTo(g.x,g.y);a.lineTo(h.x,h.y);a.stroke()}}}};
var Renderer=GMap.Canvas.extend({_initContainer:function(){GMap.Canvas.prototype._initContainer.call(this);this._hotline=new Hotline(this._container)},_update:function(){GMap.Canvas.prototype._update.call(this);this._hotline.width(this._container.width);this._hotline.height(this._container.height)},_updatePoly:function(a){if(this._drawing){var b=a._parts;b.length&&(this._updateOptions(a),this._hotline.data(b).draw())}},_updateOptions:function(a){null!=a.options.min&&this._hotline.min(a.options.min);
null!=a.options.max&&this._hotline.max(a.options.max);null!=a.options.weight&&this._hotline.weight(a.options.weight);null!=a.options.outlineWidth&&this._hotline.outlineWidth(a.options.outlineWidth);null!=a.options.outlineColor&&this._hotline.outlineColor(a.options.outlineColor);a.options.palette&&this._hotline.palette(a.options.palette)}}),renderer=function(a){return GMap.Browser.canvas?new Renderer(a):null};
GMap.Hotline=GMap.Polyline.extend({statics:{Renderer:Renderer,renderer:renderer},options:{renderer:renderer(),min:0,max:1,palette:{0:"green","0.5":"yellow",1:"red"},weight:5,outlineColor:"black",outlineWidth:1},getRGBForValue:function(a){return this._renderer._hotline.getRGBForValue(a)},_projectLatlngs:function(a,b,c){var d=a.length,f;if(a[0]instanceof GMap.LatLng){var e=[];for(f=0;f<d;f++)e[f]=this._map.latLngToLayerPoint(a[f]),e[f].z=a[f].alt,c.extend(e[f]);b.push(e)}else for(f=0;f<d;f++)this._projectLatlngs(a[f],
b,c)},_clipPoints:function(){if(this.options.noClip)this._parts=this._rings;else{var a=this._parts=[],b=this._renderer._bounds,c,d,f,e;var g=c=0;for(d=this._rings.length;c<d;c++){var h=this._rings[c];var k=0;for(f=h.length;k<f-1;k++)if(e=Util.clipSegment(h[k],h[k+1],b,k,!0))if(a[g]=a[g]||[],a[g].push(e[0]),e[1]!==h[k+1]||k===f-2)a[g].push(e[1]),g++}}},_clickTolerance:function(){return this.options.weight/2+this.options.outlineWidth+(GMap.Browser.touch?10:0)}});
