var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,e=0;e<d;e++){var g=b[e];if(a.call(c,g,e,b))return{i:e,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,d){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==d||d>a)d=a;d=Number(d);0>d&&(d=Math.max(0,a+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}},"es6","es3");function tab2plot(){$("#tab_attr").addClass("disabled");$("#tab_plot").click()}
$(function(){$(window).resize(refHeight);refHeight();$(".mp_icon_close").click(function(){$(this).parent().parent(".mp_box").hide()});$(".mp_tab_tit li").click(function(){if($(this).hasClass("cur")||$(this).hasClass("disabled"))return!1;var b=$(this),a=b.index();b.addClass("cur").siblings("li").removeClass("cur");b.parent().siblings(".mp_tab_con").children().eq(a).addClass("cur").siblings().removeClass("cur");b=$(this).attr("id");"tab_plot"!=b&&(last_attr_tab=b)});$(".open").click(changeOpenShowHide)});
var last_attr_tab="tab_attr";function tab2attr(){$("#tab_attr").removeClass("disabled");$("#tab_plot").hasClass("cur")&&$("#"+last_attr_tab).click()}function changeOpenShowHide(){var b=$(this).siblings(),a=$(this).children(".tree_icon");b.toggle();b.is(":hidden")?a.html("+"):a.html("-")}function refHeight(){$(".mp_tab_card").height($(".mp_box").height()-$(".mp_head").height()-1);$(".mp_tree").height($(".mp_tab_card").height()-32);$(".mp_mark").height($(".mp_tab_card").height()-80)}
!function(b){var a={select:"mp_select",select_text:"mp_select_text",select_ul:"mp_select_ul"};b.fn.extend({select:function(c){var d=b.extend({},a,c);return this.each(function(){var a=b(this);void 0!==a.data("value")&&""!==a.data("value")&&a.val(a.data("value"));var c=[];c.push('<div class="'+a.attr("class")+'">');c.push('<div class="'+d.select_text+'">'+a.find(":selected").text()+"</div>");c.push('<ul class="'+d.select_ul+'">');a.children("option").each(function(){var d=b(this);a.data("value");d.val();
c.push('<li data-value="'+d.val()+'">'+d.text()+"</li>")});c.push("</ul>");c.push("</div>");var f=b(c.join("")),h=f.find("."+d.select_text),k=f.find("."+d.select_ul);a.after(f);a.hide();f.click(function(a){b(this).toggleClass("mp_selected");b(this).find("."+d.select_ul).slideToggle().end().siblings("div."+d.select).find("."+d.select_ul).slideUp();a.stopPropagation()});b("body").click(function(){k.slideUp()});k.on("click","li",function(){var c=b(this),d=c.addClass("selecton").siblings("li").removeClass("selecton").end().data("value").toString();
d!==a.attr("data-value")&&(h.text(c.text()),a.attr("data-value",d),a.change())})})},checkbox:function(){return this.each(function(){var a=b(this),d=a.siblings("input");1==d.prop("disabled")?a.addClass("pnui-check-disbaled"):1==d.prop("checked")?a.addClass("pnui-checked"):a.removeClass("pnui-checked");a.on("click",function(){if(1==d.prop("disabled"))return!1;a.hasClass("pnui-checked")?(d.removeAttr("checked"),a.removeClass("pnui-checked")):(d.attr("checked","checked"),a.addClass("pnui-checked"))});
b(".checkall").click(function(){var a=b(this),c=a.parents(".checkallbox").find(".pnui-chkbox");a.toggleClass("pnui-checked");c.each(function(){b(this).toggleClass("pnui-checked")});a.hasClass("pnui-checked")?(c.siblings("input").attr("checked","checked"),c.addClass("pnui-checked")):(c.siblings("input").removeAttr("checked"),c.removeClass("pnui-checked"))})})},radio:function(){return this.each(function(){var a=b(this);1==a.children("input").prop("disabled")?a.children(".pnui-rdobox").removeClass().addClass("pnui-rdobox pnui-radio-disbaled"):
1==a.children("input").prop("checked")?(a.siblings().children("input").removeAttr("checked"),a.siblings().children(".pnui-rdobox").removeClass("pnui-checked"),a.children(".pnui-rdobox").addClass("pnui-checked")):(a.siblings().children("input").prop("checked","checked"),a.siblings().children(".pnui-rdobox").addClass("pnui-checked"),a.children(".pnui-rdobox").removeClass("pnui-checked"));a.on("click",function(){var a=b(this);if(1==a.children("input").prop("disabled"))return!1;1==a.children("input").prop("checked")?
(a.siblings().children("input").prop("checked","checked"),a.siblings().children(".pnui-rdobox").addClass("pnui-checked"),a.children("input").removeAttr("checked"),a.children(".pnui-rdobox").removeClass("pnui-checked")):(a.siblings().children("input").removeAttr("checked"),a.siblings().children(".pnui-rdobox").removeClass("pnui-checked"),a.children("input").prop("checked","checked"),a.children(".pnui-rdobox").addClass("pnui-checked"))})})},progress:function(a){return this.each(function(){var c=b(this),
e=[];e.push('<div class="puiprogress">');e.push('<div class="puiprogress_bg">');e.push('<div class="puiprogress_bar"></div>');e.push("</div>");e.push('<div class="puiprogress_btn"></div>');e.push('<div class="puiprogress_text">'+c.val()+"%</div>");e.push("</div>");e=b(e.join(""));var g=e.find(".puiprogress_bg"),f=e.find(".puiprogress_btn"),h=e.find(".puiprogress_bar"),k=e.find(".puiprogress_text");c.after(e);c.hide();var m=!1,n=0,l=0,p=0;e.css("width",a);var q=Number(c.val());l=a*q/100;f.css("left",
l);h.width(l);k.html(parseInt(q)+"%");f.mousedown(function(a){n=a.pageX-l;m=!0});b(document).mouseup(function(){m=!1});e.mousemove(function(b){m&&(0>=(l=b.pageX-n)?l=0:a<l&&(l=a),f.css("left",l),h.width(l),b=parseInt(l/a*100),k.html(b+"%"),c.val(b),c.change())});g.click(function(b){m||(p=g.offset().left,0>=(l=b.pageX-p)?l=0:a<l&&(l=a),f.css("left",l),h.animate({width:l},a),b=parseInt(l/a*100),k.html(b+"%"),c.val(b),c.change())})})}})}(jQuery);
var Z={label:{edittype:"label",name:"\u6587\u5b57",style:{text:"\u6587\u5b57",color:"#ffffff",opacity:1,font_family:"\u6977\u4f53",font_size:30,border:!0,border_color:"#000000",border_width:3,background:!1,background_color:"#000000",background_opacity:.5,font_weight:"normal",font_style:"normal",scaleByDistance:!1,scaleByDistance_far:1E6,scaleByDistance_farValue:.1,scaleByDistance_near:1E3,scaleByDistance_nearValue:1,distanceDisplayCondition:!1,distanceDisplayCondition_far:1E4,distanceDisplayCondition_near:0},
attr:{id:"",name:"",remark:""}},point:{edittype:"point",name:"\u70b9\u519b\u6807",style:{symbolSize:.2,pixelSize:.2,textx:.2,texty:.2,textcolor:"#ff0000",font_size:30,color:"#3388ff",opacity:1,outline:!0,anchor:"CENTER",name:"",outlineColor:"#ffffff",outlineOpacity:1,outlineWidth:2,scaleByDistance:!1,scaleByDistance_far:1E6,scaleByDistance_farValue:.1,scaleByDistance_near:1E3,scaleByDistance_nearValue:1,distanceDisplayCondition:!1,distanceDisplayCondition_far:1E4,distanceDisplayCondition_near:0},
attr:{id:"",name:"",remark:""}},imagepoint:{edittype:"imagepoint",name:"\u56fe\u6807\u70b9\u6807\u8bb0",style:{image:"",opacity:1,scale:1,rotation:0,scaleByDistance:!1,scaleByDistance_far:1E6,scaleByDistance_farValue:.1,scaleByDistance_near:1E3,scaleByDistance_nearValue:1,distanceDisplayCondition:!1,distanceDisplayCondition_far:1E4,distanceDisplayCondition_near:0},attr:{id:"",name:"",remark:""}},model:{edittype:"model",name:"\u6a21\u578b",style:{modelUrl:"",scale:1,heading:0,pitch:0,roll:0,fill:!1,
color:"#3388ff",opacity:1,silhouette:!1,silhouetteColor:"#ffffff",silhouetteSize:2,silhouetteAlpha:.8},attr:{id:"",name:"",remark:""}},polyline:{edittype:"polyline",name:"\u7ebf",position:{minCount:2},style:{lineType:"solid",color:"#3388ff",width:4,clampToGround:!1,outline:!1,outlineColor:"#ffffff",outlineWidth:2,opacity:1},attr:{id:"",name:"",remark:""}},polylineVolume:{edittype:"polylineVolume",name:"\u7ba1\u9053\u7ebf",position:{height:!0,minCount:2},style:{color:"#00FF00",radius:10,shape:"pipeline",
outline:!1,outlineColor:"#ffffff",opacity:1},attr:{id:"",name:"",remark:""}},polygon:{edittype:"polygon",name:"\u9762",position:{height:!0,minCount:3},style:{color:"#3388ff",opacity:.6,outline:!0,outlineColor:"#ffffff",outlineOpacity:1,clampToGround:!1},attr:{id:"",name:"",remark:""}},polygon_clampToGround:{edittype:"polygon_clampToGround",name:"\u8d34\u5730\u9762",position:{height:!1,minCount:3},style:{color:"#ffff00",opacity:.6,outline:!0,outlineColor:"#ffffff",outlineOpacity:1,clampToGround:!0},
attr:{id:"",name:"",remark:""}},extrudedPolygon:{edittype:"extrudedPolygon",name:"\u62c9\u4f38\u9762",position:{height:!0,minCount:3},style:{color:"#00FF00",opacity:.6,outline:!0,outlineColor:"#ffffff",outlineOpacity:1,extrudedHeight:100,perPositionHeight:!0},attr:{id:"",name:"",remark:""}},rectangle:{edittype:"rectangle",name:"\u77e9\u5f62",position:{height:!1,minCount:2,maxCount:2},style:{height:0,color:"#3388ff",rotation:0,opacity:.6,clampToGround:!1},attr:{id:"",name:"",remark:""}},rectangle_clampToGround:{edittype:"rectangle_clampToGround",
name:"\u8d34\u5730\u77e9\u5f62",position:{height:!1,minCount:2,maxCount:2},style:{color:"#ffff00",rotation:0,opacity:.6,clampToGround:!0},attr:{id:"",name:"",remark:""}},rectangleImg:{edittype:"rectangleImg",name:"\u8d34\u5730\u56fe\u7247",position:{height:!1,minCount:2,maxCount:2},style:{image:"",rotation:0,opacity:1,clampToGround:!0},attr:{id:"",name:"",remark:""}},extrudedRectangle:{edittype:"extrudedRectangle",name:"\u62c9\u4f38\u77e9\u5f62",position:{height:!1,minCount:2,maxCount:2},style:{color:"#00FF00",
outline:!0,outlineColor:"#ffffff",rotation:0,opacity:.6,extrudedHeight:40,height:0},attr:{id:"",name:"",remark:""}},ellipse:{edittype:"ellipse",name:"\u692d\u5706",position:{height:!1},style:{semiMinorAxis:500,semiMajorAxis:500,height:0,opacity:.6,fill:!0,color:"#3388ff",outline:!0,outlineColor:"#ffffff",rotation:0,clampToGround:!1},attr:{id:"",name:"",remark:""}},ellipse_clampToGround:{edittype:"ellipse_clampToGround",name:"\u692d\u5706",position:{height:!1},style:{semiMinorAxis:500,semiMajorAxis:500,
opacity:.6,fill:!0,color:"#ffff00",outline:!0,outlineColor:"#ffffff",rotation:0,clampToGround:!0},attr:{id:"",name:"",remark:""}},extrudedEllipse:{edittype:"extrudedEllipse",name:"\u5706\u67f1\u4f53",position:{height:!1},style:{semiMinorAxis:100,semiMajorAxis:100,opacity:.6,fill:!0,color:"#00FF00",outline:!0,outlineColor:"#ffffff",extrudedHeight:100,height:0,rotation:0},attr:{id:"",name:"",remark:""}},ellipsoid:{edittype:"ellipsoid",name:"\u7403\u4f53",style:{extentRadii:100,widthRadii:100,heightRadii:100,
color:"#00FF00",outline:!0,outlineColor:"#ffffff",fill:!0,opacity:.6},attr:{id:"",name:"",remark:""}},wall:{edittype:"wall",name:"\u5899\u4f53",position:{height:!0,minCount:2},style:{color:"#00FF00",outline:!0,outlineColor:"#ffffff",opacity:.6,extrudedHeight:40},attr:{id:"",name:"",remark:""}}},thisWidget=parent.g_drawHelper,g_symidnames=["\u70b9\u519b\u6807","\u7ebf\u9762\u519b\u6807"],g_symidpages=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,
37,38,39,40,41,42,43,44,45,46,47,48,49,50],[19,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68]],g_syminfo="\u4e0a\u7ea7\u6307\u6325\u6240 \u519b\u79cd/\u519b\u533a\u6307\u6325\u6240 \u5730\u533a\u9632\u7a7a\u6307\u6325\u6240 \u5e08\u6307\u6325\u6240 \u65c5\u6307\u6325\u6240 \u56e2\u6307\u6325\u6240 \u8425\u6307\u6325\u6240 \u8fde\u6307\u6325\u6240 \u7ef4\u4fee\u6280\u672f\u57fa\u5730 \u673a\u52a8\u5f0f\u4e2d\u7a0b\u591a\u7ba1\u5730\u7a7a\u5bfc\u5f39\u8fde \u5c0f\u53e3\u5f84\u9ad8\u70ae\u8fde \u673a\u52a8\u5f0f\u4e2d\u7a0b\u591a\u7ba1\u5730\u7a7a\u5bfc\u5f39\u8fde \u5730\u7a7a\u5bfc\u5f39\u8fde\u5907\u7528\u9635\u5730 \u5927\u4e8e100mm\u53e3\u5f84\u9ad8\u70ae 20-60mm\u53e3\u5f84\u9ad8\u70ae STRELLA\u5730\u7a7a\u5bfc\u5f39\u53d1\u5c04\u67b6 \u81ea\u884c\u9ad8\u70ae\u8fde \u9ad8\u70ae\u6392\u5907\u7528\u9635\u5730 \u9ad8\u70ae\u8fde\u6218\u6597\u88c5\u7f6e \u9ad8\u70ae\u6392\u8bf1\u9975\u9635\u5730 \u5bfc\u5f39\u5236\u5bfc\u96f7\u8fbe \u5398\u7c73\u6ce2\u96f7\u8fbe \u5206\u7c73\u6ce2\u96f7\u8fbe \u7c73\u6ce2\u96f7\u8fbe \u7535\u5b50\u6218\u56e2\u6307\u6325\u6240 \u7535\u5b50\u6218\u4f5c\u6218\u5355\u4f4d\u72ec\u7acb\u8425\u6307\u6325\u6240 \u7535\u5b50\u6218\u4f5c\u6218\u5355\u4f4d\u72ec\u7acb\u8425 \u76d1\u542c\u4fa6\u5bdf\u7ad9 \u7535\u5b50\u6218\u7cfb\u7edf\u81ea\u52a8\u5316\u6307\u6325\u6240 \u5e72\u6270\u7fa4\u7ec4\u81ea\u52a8\u5316\u6307\u6325\u6240 \u5e72\u6270\u7ad9 \u5bfc\u822a\u7cfb\u7edf\u5e72\u6270\u7ad9 \u65e0\u7ebf\u7535\u6280\u672f\u4fa6\u5bdf\u7ad9 \u4fa6\u5bdf\u6d4b\u5411\u7ad9 \u4fa6\u5bdf\u5b9a\u4f4d\u8fde \u4e8c\u7ea7\u673a\u573a \u4e09\u7ea7\u673a\u573a \u6ce5\u5730\u673a\u573a \u6218\u6597\u673a \u4e00\u7ea7\u673a\u573a \u6218\u6597\u8f70\u70b8\u673a \u6218\u672f\u8f70\u70b8\u673a \u65e0\u4eba\u4fa6\u5bdf\u673a \u8fd0\u8f93\u673a \u6218\u7565\u8f70\u70b8\u673a \u4fa6\u5bdf\u673a \u52a0\u6cb9\u673a \u4fa6\u5bdf\u76f4\u5347\u673a \u6218\u6597\u76f4\u5347\u673a \u8fd0\u8f93\u76f4\u5347\u673a \u7a7a\u4e2d\u503c\u73ed\u533a \u81ea\u7531\u4ea4\u6218\u533a \u534a\u81ea\u4e3b\u641c\u7d22\u533a \u7a7a\u6218 \u56fd\u571f\u9632\u7a7a\u533a\u57df\u95f4\u7684\u4fa7\u5411\u754c\u9650 \u56e2\u4fa7\u5411\u754c\u9650 \u8425\u4fa7\u5411\u754c\u9650 \u5927\u4f5c\u6218\u5355\u4f4d\u5730\u7a7a\u5bfc\u5f39\u53d1\u5c04\u533a\u53ca\u9635\u5730\u533a \u7a7a\u4e2d\u90e8\u961f\u7684\u98de\u884c\u8d70\u5eca \u5730\u7a7a\u5bfc\u5f39\u53ca\u9ad8\u70ae\u4f5c\u6218\u5355\u4f4d\u7684\u7834\u574f\u533a\u57df\u8fb9\u754c\u7ebf \u63a2\u6d4b\u533a\u57df \u5730\u7a7a\u5bfc\u5f39\u57fa\u7840\u5355\u5143\u706b\u63a7\u8fb9\u754c \u5730\u7a7a\u5bfc\u5f39\u5355\u5143\u4e3b\u53d1\u5c04\u533a\u57df \u4f4e\u7a7a\u5730\u7a7a\u5bfc\u5f39\u57fa\u7840\u5355\u5143\u8d23\u4efb\u53d1\u5c04\u533a\u57df \u5730\u7a7a\u5bfc\u5f39\u90e8\u961f\u4e0e\u6b7c\u51fb\u673a\u529b\u91cf\u8054\u5408\u4f5c\u6218\u5e26 \u5730\u7a7a\u5bfc\u5f39\u90e8\u961f\u4e0e\u6b7c\u51fb\u673a\u529b\u91cf\u8054\u5408\u4f5c\u6218\u7ebf \u624b\u7ed8\u7ebf \u6298\u7ebf".split(" "),
g_curpageidx=0,g_strJson='{"label":{"name":"\u6587\u5b57","style":[{"name":"text","label":"\u5185\u5bb9","type":"textarea","defval":"\u6587\u5b57"},{"name":"color","label":"\u989c\u8272","type":"color","defval":"#ffffff"},{"name":"opacity","label":"\u900f\u660e\u5ea6","type":"slider","defval":1},{"name":"font_family","label":"\u5b57\u4f53","type":"combobox","defval":"\u6977\u4f53","data":[{"text":"\u5fae\u8f6f\u96c5\u9ed1","value":"\u5fae\u8f6f\u96c5\u9ed1"},{"text":"\u5b8b\u4f53","value":"\u5b8b\u4f53"},{"text":"\u6977\u4f53","value":"\u6977\u4f53"},{"text":"\u96b6\u4e66","value":"\u96b6\u4e66"},{"text":"\u9ed1\u4f53","value":"\u9ed1\u4f53"}]},{"name":"font_size","label":"\u5b57\u4f53\u5927\u5c0f","type":"number","defval":30},{"name":"border","label":"\u662f\u5426\u886c\u8272","type":"radio","defval":true,"impact":["border_color","border_width","border_style"]},{"name":"border_color","label":"\u886c\u8272\u989c\u8272","type":"color","defval":"#000000"},{"name":"border_width","label":"\u886c\u8272\u5bbd\u5ea6","type":"number","defval":3},{"name":"background","label":"\u662f\u5426\u80cc\u666f","type":"radio","defval":false,"impact":["background_color","background_opacity"]},{"name":"background_color","label":"\u80cc\u666f\u989c\u8272","type":"color","defval":"#000000"},{"name":"background_opacity","label":"\u80cc\u666f\u900f\u660e\u5ea6","type":"slider","defval":0.5},{"name":"font_weight","label":"\u662f\u5426\u52a0\u7c97","type":"combobox","defval":"normal","data":[{"text":"\u662f","value":"bold"},{"text":"\u5426","value":"normal"}]},{"name":"font_style","label":"\u662f\u5426\u659c\u4f53","type":"combobox","defval":"normal","data":[{"text":"\u662f","value":"italic"},{"text":"\u5426","value":"normal"}]},{"name":"scaleByDistance","label":"\u662f\u5426\u6309\u89c6\u8ddd\u7f29\u653e","type":"radio","defval":false,"impact":["scaleByDistance_far","scaleByDistance_farValue","scaleByDistance_near","scaleByDistance_nearValue"]},{"name":"scaleByDistance_far","label":"\u4e0a\u9650","type":"number","defval":1000000},{"name":"scaleByDistance_farValue","label":"\u6bd4\u4f8b\u503c","type":"number","defval":0.1},{"name":"scaleByDistance_near","label":"\u4e0b\u9650","type":"number","defval":1000},{"name":"scaleByDistance_nearValue","label":"\u6bd4\u4f8b\u503c","type":"number","defval":1},{"name":"distanceDisplayCondition","label":"\u662f\u5426\u6309\u89c6\u8ddd\u663e\u793a","type":"radio","defval":false,"impact":["distanceDisplayCondition_far","distanceDisplayCondition_near"]},{"name":"distanceDisplayCondition_far","label":"\u6700\u5927\u8ddd\u79bb","type":"number","defval":10000},{"name":"distanceDisplayCondition_near","label":"\u6700\u5c0f\u8ddd\u79bb","type":"number","defval":0}],"attr":[{"name":"id","label":"\u4e3b\u952e","type":"hidden","defval":""},{"name":"name","label":"\u540d\u79f0","type":"text","defval":""},{"name":"remark","label":"\u5907\u6ce8","type":"textarea","defval":""}]},"point":{"name":"\u70b9\u7b26\u53f7","style":[{"name":"symbolSize","label":"\u7b26\u53f7\u5927\u5c0f","type":"slider","defval":0.2},{"name":"color","label":"\u989c\u8272","type":"color","defval":"#3388ff"},{"name":"text","label":"\u5185\u5bb9","type":"textarea","defval":"\u6587\u5b57"},{"name":"textcolor","label":"\u5b57\u4f53\u989c\u8272","type":"color","defval":"#ffffff"},{"name":"font_size","label":"\u5b57\u4f53\u5927\u5c0f","type":"number","defval":30},{"name":"textx","label":"\u6587\u5b57\u4f4d\u7f6eX","type":"number","defval":60},{"name":"texty","label":"\u6587\u5b57\u4f4d\u7f6eY","type":"number","defval":-40},{"name":"outlineColor","label":"\u8fb9\u6846\u989c\u8272","type":"color","defval":"#ffffff"},{"name":"outlineWidth","label":"\u8fb9\u6846\u5bbd\u5ea6","type":"number","defval":2}],"attr":[{"name":"id","label":"\u4e3b\u952e","type":"hidden","defval":""},{"name":"name","label":"\u540d\u79f0","type":"text","defval":""},{"name":"remark","label":"\u5907\u6ce8","type":"textarea","defval":""}]},"polyline":{"name":"\u7ebf","position":{"minCount":2},"style":[{"name":"lineType","label":"\u7ebf\u578b","type":"combobox","defval":"solid","data":[{"text":"\u5b9e\u7ebf","value":"solid"},{"text":"\u865a\u7ebf","value":"dash"},{"text":"\u70b9\u7ebf","value":"point"},{"text":"\u70b9\u5316\u7ebf","value":"ptline"}]},{"name":"outlineColor","label":"\u989c\u8272","type":"color","defval":"#3388ff"},{"name":"outlineWidth","label":"\u7ebf\u5bbd","type":"number","defval":4},{"name":"opacity","label":"\u900f\u660e\u5ea6","type":"slider","defval":1}],"attr":[{"name":"id","label":"\u4e3b\u952e","type":"hidden","defval":""},{"name":"name","label":"\u540d\u79f0","type":"text","defval":""}]},"polygon":{"name":"\u9762","position":{"height":true,"minCount":3},"style":[{"name":"fill","label":"\u662f\u5426\u586b\u5145","type":"radio","defval":true,"impact":["color","opacity"]},{"name":"color","label":"\u989c\u8272","type":"color","defval":"#3388ff"},{"name":"opacity","label":"\u900f\u660e\u5ea6","type":"slider","defval":0.6},{"name":"outline","label":"\u662f\u5426\u8fb9\u6846","type":"radio","defval":true,"impact":["outlineWidth","outlineColor","outlineOpacity"]},{"name":"outlineWidth","label":"\u8fb9\u6846\u5bbd\u5ea6","type":"number","defval":1},{"name":"outlineColor","label":"\u8fb9\u6846\u989c\u8272","type":"color","defval":"#ffffff"},{"name":"outlineOpacity","label":"\u8fb9\u6846\u900f\u660e\u5ea6","type":"slider","defval":0.6}],"attr":[{"name":"id","label":"\u4e3b\u952e","type":"hidden","defval":""},{"name":"name","label":"\u540d\u79f0","type":"text","defval":""},{"name":"remark","label":"\u5907\u6ce8","type":"textarea","defval":""}]}}';
function initWidgetView(b){(thisWidget=b).config&&thisWidget.config.style&&$("body").addClass(thisWidget.config.style);$("#btn_plot_delall").click(function(){thisWidget.deleteAll()});$("#btnDelete").click(function(a){thisWidget.deleteCurrentEntity();tab2plot()});$("#btnCenter").click(function(a){thisWidget.centerCurrentEntity()});var a=!0;$("#btn_plot_isedit").click(function(){(a=!a)?($(this).removeClass("active"),$(this).children().removeClass("fa-lock").addClass("fa-unlock")):($(this).addClass("active"),
$(this).children().removeClass("fa-unlock").addClass("fa-lock"));thisWidget.hasEdit(a)});plotFile.initEvent();plotEdit.initEvent();plotEdit.loadConfig()}
var plotFile={initEvent:function(){var b=this;$("#btn_plot_openfile").click(function(){$("#input_plot_file").click()});$("#btn_plot_openfile2").click(function(){$("#input_plot_file").click()});$("#btn_plot_delall").click(function(){getParentHelper().removeAll()});$("#btn_plot_savefile").click(function(){var a=getParentHelper().saveSymbols();haoutil.file.downloadFile("\u6807\u7ed8.json",JSON.stringify(a))});$("#input_plot_file").change(function(a){a=this.files[0];var c=a.name;"json"!=c.substring(c.lastIndexOf(".")+
1,c.length).toLowerCase()?alert("\u6587\u4ef6\u7c7b\u578b\u4e0d\u5408\u6cd5,\u8bf7\u9009\u62e9json\u683c\u5f0f\u6807\u6ce8\u6587\u4ef6\uff01"):(void b.clearPlotFile(),window.FileReader&&(c=new FileReader,c.readAsText(a,"UTF-8"),c.onloadend=function(a){a=this.result;getParentHelper().readSymbol(a);b.clearPlotFile()}))})},clearPlotFile:function(){window.addEventListener?document.getElementById("input_plot_file").value="":document.getElementById("input_plot_file").outerHTML+=""}},plotlist={bindSelList:function(){for(var b=
this,a=$("#sel_plot_list"),c,d="",e=0;e<g_symidnames.length;e++)d+='<option value="'+e+'">'+g_symidnames[e]+"("+g_symidpages[e].length+")</option>";null==c&&(c=0);b.showPlotList2(c);a.attr("data-value",c);null!=c&&(a.attr("data-value",c),a.html(d),a.select(),a.change(function(){var a=$(this).attr("data-value");b.showPlotList2(a)}))},_listData:null,showPlotList2:function(b){g_curpageidx=this._listData=b;displayGlyphArray(g_symidpages[b])},_lastLi:null,startPlot:function(b,a){a=$(a);a.addClass("markon");
this._lastLi&&this._lastLi.removeClass("markon");this._lastLi=a;b=this._listData[b];a=haoutil.system.clone(plotEdit.defval[b.edittype||b.type]||{});if(b.style)for(var c in b.style)a.style[c]=b.style[c];if(b.attr)for(c in b.attr)a.attr[c]=b.attr[c];a.type=b.type;a.name=a.name||b.name;thisWidget.startDraw(a)},plotEnd:function(){this._lastLi&&this._lastLi.removeClass("markon")}},plotEdit={hasEditSylte:!0,config:{},defval:{},initEvent:function(){this.hasEditSylte||$("#attr_style_view").hide();$("#plot_latlngs_allheight").bind("input propertychange",
function(){$("#plot_latlngs_addheight").val("");var b=Number($(this).val());isNaN(b)&&(b=1);var a=[];$(".plot_latlngs").each(function(){"height"==$(this).attr("data-type")?($(this).val(b),a.push(b)):a.push(Number($(this).val()))});thisWidget.updateGeo2map(a,!0)});$("#plot_latlngs_addheight").bind("input propertychange",function(){$("#plot_latlngs_allheight").val("");var b=Number($(this).val());isNaN(b)&&(b=1);var a=[];$(".plot_latlngs").each(function(){if("height"==$(this).attr("data-type")){var c=
Number($(this).attr("oldvalue"));$(this).val(c+b);a.push(c+b)}else a.push(Number($(this).val()))});thisWidget.updateGeo2map(a,!0)})},loadConfig:function(){var b=JSON.parse(g_strJson),a;for(a in this.config=b){for(var c={},d=0;d<b[a].style.length;d++)c[(g=b[a].style[d]).name]=g.defval;var e={};for(d=0;d<b[a].attr.length;d++){var g;e[(g=b[a].attr[d]).name]=g.defval}this.defval[a]={edittype:a,name:b[a].name,position:b[a].position,style:c,attr:e}}plotlist.bindSelList()},_last_attr:null,startEditing:function(b,
a){this._last_attr=b;var c=this.config[b.edittype]||{};a&&this.updateLatlngsHtml(a,c.position);a=[];if(this.hasEditSylte){for(var d="plot_attr_style_",e='<tr><td class="nametd">\u7c7b\u578b\uff1a</td><td>'+(c.name||b.name)+"</td></tr>",g=0;g<c.style.length;g++)if("hidden"!=(k=c.style[g]).type){var f=k.name,h=b.style[f];(m=this.getAttrInput(d,f,h,k)).fun&&(a.push({parname:d,name:f,value:h,edit:k,fun:m.fun}),e+='<tr  id="'+d+"tr_"+f+'" > <td class="nametd">'+k.label+"</td>  <td>"+m.html+"</td>  </tr>")}$("#talbe_style").html(e)}d=
"plot_attr_attr_";e="";for(g=0;g<c.attr.length;g++){var k;if("hidden"!=(k=c.attr[g]).type){var m;f=k.name;h=b.attr[f];(m=this.getAttrInput(d,f,h,k)).fun&&a.push({parname:d,name:f,value:h,edit:k,fun:m.fun});e+='<tr  id="'+d+"tr_"+f+'" > <td class="nametd">'+k.label+"</td>  <td>"+m.html+"</td>  </tr>"}}$("#talbe_attr").html(e);for(g=0;g<a.length;g++)b=a[g],b.fun(b.parname,b.name,b.value,b.edit);tab2attr()},lastCfg:null,updateLatlngsHtml:function(b,a){this.lastCfg=a=a||this.lastCfg||{};$("#plot_latlngs_addheight").val("");
$("#plot_latlngs_allheight").val("");$("#view_updateheight").hide();a.hasOwnProperty("height")||(a.height=!0);var c="";if(b&&0!=b.length)if(1==b.length){var d=(h=b[0])[0],e=h[1];h=3==h.length?h[2]:0;c+=' <div class="mp_attr" style=" margin-top: 10px;"><table> <tr> <td class="nametd">\u7ecf\u5ea6\uff1a</td> <td><input type="number" class="mp_input plot_latlngs" data-type="jd" value="'+d+'"></td></tr><tr>  <td class="nametd">\u7eac\u5ea6\uff1a</td> <td><input type="number" class="mp_input plot_latlngs" data-type="wd" value="'+
e+'"></td></tr>';a.height&&(c+='<tr><td class="nametd">\u9ad8\u7a0b\uff1a</td> <td><input type="number" class="mp_input plot_latlngs" data-type="height" value="'+h+'" oldvalue="'+h+'"></td></tr>');c+=" </table> </div>"}else{a.height&&$("#view_updateheight").show();var g="";b.length>(a.minCount||3)&&(g='<i class="fa fa-trash-o latlng-del" title="\u5220\u9664\u70b9" ></i>');for(var f=0;f<b.length;f++){d=(h=b[f])[0];e=h[1];h=3==h.length?h[2]:0;var h,k="";(null==a.maxCount||b.length<a.maxCount)&&(k='<i class="fa  fa-plus-square-o latlng-install" title="\u63d2\u5165\u70b9" data-index="'+
f+'" ></i>&nbsp;&nbsp;');c+='<div><div class="open"><i class="tree_icon">-</i>\u7b2c'+(f+1)+'\u70b9 <label style="width:100px;">&nbsp;</label>    '+k+g+' </div><div class="mp_attr"><table><tr> <td class="nametd">\u7ecf\u5ea6\uff1a</td> <td><input  type="number" class="mp_input plot_latlngs" data-type="jd" data-index="'+f+'" value="'+d+'"></td>  </tr> <tr>  <td class="nametd">\u7eac\u5ea6\uff1a</td> <td><input  type="number" class="mp_input plot_latlngs" data-type="wd" data-index="'+f+'" value="'+
e+'"></td> </tr> ';a.height&&(c+='<tr>  <td class="nametd">\u9ad8\u7a0b\uff1a</td> <td><input  type="number" class="mp_input plot_latlngs" data-type="height" data-index="'+f+'" value="'+h+'" oldvalue="'+h+'"></td> </tr> ');c+=" </table> </div> </div>"}}$("#view_latlngs").html(c);$("#view_latlngs .open").click(changeOpenShowHide);var m=this;$("#view_latlngs .latlng-del").click(function(){$(this).parent().parent().remove();var a=[],b=!1;$(".plot_latlngs").each(function(){a.push(Number($(this).val()));
"height"===$(this).attr("data-type")&&(b=!0)});thisWidget.updateGeo2map(a,b);var c=[];if(b)for(var d=0;d<a.length;d+=3)c.push([a[d],a[d+1],a[d+2]]);else for(d=0;d<a.length;d+=2)c.push([a[d],a[d+1]]);m.updateLatlngsHtml(c)});$("#view_latlngs .latlng-install").click(function(){var a=Number($(this).attr("data-index")),b=[],c=!1;$(".plot_latlngs").each(function(){b.push(Number($(this).val()));"height"===$(this).attr("data-type")&&(c=!0)});var d=[];if(c)for(var e=0;e<b.length;e+=3)d.push([b[e],b[e+1],
b[e+2]]);else for(e=0;e<b.length;e+=2)d.push([b[e],b[e+1]]);var h=d[a],k=a==d.length-1?d[0]:d[a+1];e=Number(((h[0]+k[0])/2).toFixed(6));var f=Number(((h[1]+k[1])/2).toFixed(6));c?(h=Number(((h[2]+k[2])/2).toFixed(1)),d.splice(a+1,0,[e,f,h]),b.splice(3*(a+1),0,e,f,h)):(d.splice(a+1,0,[e,f]),b.splice(3*(a+1),0,e,f));m.updateLatlngsHtml(d);thisWidget.updateGeo2map(b,c)});$(".plot_latlngs").bind("input propertychange",function(){var a=[],b=!1;$(".plot_latlngs").each(function(){a.push(Number($(this).val()));
"height"===$(this).attr("data-type")&&(b=!0)});thisWidget.updateGeo2map(a,b)})},stopEditing:function(){tab2plot();$("#talbe_style").html("");$("#talbe_attr").html("");this._last_attr=null},getAttrInput:function(b,a,c,d){null!=c&&null!=c||(c="");var e=this,g="",f=null;switch(d.type){default:case "label":g=c;break;case "text":g='<input id="'+b+a+'" type="text" value="'+c+'"   class="mp_input" />';f=function(a,b,c,d){$("#"+a+b).on("input propertychange",function(c){c=$(this).val();e.updateAttr(a,b,c)})};
break;case "textarea":g='<textarea  id="'+b+a+'"     class="mp_input" style="height:50px;resize: none;" >'+(c=c.replace(/<br \/>/gm,"\n"))+"</textarea>";f=function(a,b,c,d){$("#"+a+b).on("input propertychange",function(c){c=$(this).val();0==c.length&&(c="  ");c=c.replace(/\n/g,"<br />");e.updateAttr(a,b,c)})};break;case "number":g='<input id="'+b+a+'" type="number" value="'+c+'"    class="mp_input"/>';f=function(a,b,c,d){$("#"+a+b).on("input propertychange",function(c){c=Number($(this).val());e.updateAttr(a,
b,c)})};break;case "combobox":g='<select id="'+b+a+'" class="mp_select"    data-value="'+c+'" >';for(c=0;c<d.data.length;c++)b=d.data[c],g+='<option value="'+b.value+'">'+b.text+"</option>";g+="</select>";f=function(a,b,c,d){$("#"+a+b).select();$("#"+a+b).change(function(){var c=$(this).attr("data-value");e.updateAttr(a,b,c)})};break;case "radio":d=b+a;g='  <div class="radio radio-info radio-inline">                                <input type="radio" id="'+d+'_1" value="1"  name="'+d+'"  '+(c?'checked="checked"':
"")+'>                                <label for="'+d+'_1"> \u662f</label>                            </div>                            <div class="radio radio-info radio-inline">                                <input type="radio" id="'+d+'_2" value="2" name="'+d+'" '+(c?"":'checked="checked"')+' ">                                <label for="'+d+'_2"> \u5426 </label>                            </div>';f=function(a,b,c,d){$('input:radio[name="'+a+b+'"]').change(function(){var c="1"==$(this).val();
e.updateAttr(a,b,c);e.changeViewByAttr(a,d.impact,c)});e.changeViewByAttr(a,d.impact,c)};break;case "color":g='<input id="'+b+a+'"  class="mp_input" style="width: 100%;"  value="'+c+'" />';f=function(a,b,c,d){$("#"+a+b).minicolors({position:"bottom right",control:"saturation",change:function(c,d){e.updateAttr(a,b,c)}})};break;case "slider":g='<input id="'+b+a+'"  type="text" value="'+100*c+'" />';f=function(a,b,c,d){c=.7*$(".mp_tab_card").width()-30;$("#"+a+b).progress(c);$("#"+a+b).change(function(){var c=
Number($(this).val())/100;e.updateAttr(a,b,c)})};break;case "window":g='<input id="'+b+a+'" type="text" value="'+c+'" readonly   class="mp_input" />',f=function(a,b,c,d){$("#"+a+b).on("click",function(d){thisWidget.showEditAttrWindow({data:e._last_attr,parname:a,attrName:b,attrVal:c})});$("#"+a+b).on("input propertychange",function(c){c=$(this).val();e.updateAttr(a,b,c)})}}return{html:g,fun:f}},changeViewByAttr:function(b,a,c){if(a&&0<a.length)for(var d=0;d<a.length;d++){var e=a[d];c?$("#"+b+"tr_"+
e).show():$("#"+b+"tr_"+e).hide()}},updateAttr:function(b,a,c){switch(b){case "plot_attr_style_":this._last_attr.style[a]=c;break;case "plot_attr_attr_":this._last_attr.attr[a]=c}thisWidget.updateAttribute(this._last_attr)}};plotFile.initEvent();plotEdit.initEvent();
function showEditProperty(b,a,c){var d=getGidFromKeyid(a),e=getParentHelper();0==b?(a=Z.point,a.style.text=c.text,a.style.symbolSize=(c.symbolWidth-40)/400,a.style.textx=c.textx,a.style.texty=c.texty,a.style.font_size=c.font_size,a.style.textcolor=c.textcolor,a.style.outline=!0,a.style.outlineColor=c.stroke,a.style.outlineWidth=c.strokeWidth,a.style.color=c.fill,a.style.anchor=c.anchor,a.style.name=c.name,plotEdit.startEditing(a),e.displayGlyph2(document.getElementById("g_id"),d,c)):1==b?(a=Z.polyline,
a.style.outlineColor=c.stroke,a.style.outlineWidth=c.strokeWidth,a.style.color=c.fill,plotEdit.startEditing(a),e.displayGlyph2(document.getElementById("g_id"),d,c)):3==b?(b=Z.polygon,null!=a&&(b.style.fill=a.fill,b.style.color=a.color),plotEdit.startEditing(b),e.displayGlyph2(document.getElementById("g_id"),d,c)):4==b&&(plotEdit.startEditing(Z.label),e.displayGlyph2(document.getElementById("g_id"),d,c))};var cellCount=72,cellWidth=50,cellHeight=50,pixelRatio=window.devicePixelRatio||1,font,fontScale,fontSize,fontBaseline;function enableHighDPICanvas(b){"string"===typeof b&&(b=document.getElementById(b));var a=window.devicePixelRatio||1;if(1!==a){var c=b.width,d=b.height;b.width=c*a;b.height=d*a;b.style.width=c+"px";b.style.height=d+"px";b.getContext("2d").scale(a,a)}}
function renderGlyphItem(b,a){var c=b.getContext("2d");c.clearRect(0,0,cellWidth,cellHeight);if(!(a>=font.numGlyphs)){c.fillStyle="#606060";c.font="9px sans-serif";c.fillText(a,1,cellHeight-1);var d=font.glyphs.get(a),e=d.advanceWidth,g=d.advanceWidth*fontScale,f=(cellWidth-g)/2;g=(cellWidth+g)/2;c.fillStyle="#a0a0a0";c.fillRect(f-4+1,fontBaseline,4,1);c.fillRect(f,fontBaseline,1,4);c.fillRect(g,fontBaseline,4,1);c.fillRect(g,fontBaseline,1,4);c.fillStyle="#000000";f=d.getPath(f,fontBaseline,fontSize);
f.fill="#ff0000";f.stroke="#ff0000";f.draw(c);d.advanceWidth=e;var h='<font size="2" color="#575757">'+g_syminfo[a-1]+"</font>";b.onmousemove=function(a){if("none"==g_tooltip.style.display){var b=this.getBoundingClientRect();a=b.left;b=b.top;g_tooltip.style.position="absolute";g_tooltip.style.left=a+"px";g_tooltip.style.top=b+"px";g_tooltip.style.display="block";g_tooltip.innerHTML=h}};b.onmouseout=function(a){g_tooltip.style.display="none"}}}
function displayGlyphArray(b){for(var a=0;a<b.length;a++)renderGlyphItem(document.getElementById("g"+a),b[a]);for(;a<cellCount;)document.getElementById("g"+a).onmousemove=null,document.getElementById("g"+a).onmouseout=null,document.getElementById("g"+a).getContext("2d").clearRect(0,0,cellWidth,cellHeight),a++}var g_tooltip;function prepareTooltip(b){var a=document.createElement("span");a.className="mapjb-marker-iconlabel2 ";a.innerHTML="gggg";b.appendChild(a);return a}
function prepareGlyphList(b){var a=document.createElement("DIV");b.appendChild(a);var c=document.createElement("DIV");c.id="glyph-list-end";a.appendChild(c);a=document.getElementById("glyph-list-end");c=a.parentElement;for(var d=0;d<cellCount;d++){var e=document.createElement("canvas");e.width=cellWidth;e.height=cellHeight;e.className="item";e.id="g"+d;e.addEventListener("click",cellSelect,!1);enableHighDPICanvas(e);c.insertBefore(e,a)}g_tooltip=prepareTooltip(b)}
function cellSelect(b){if(font){b=parseInt(b.target.id.substr(1));b=g_symidpages[g_curpageidx][b];var a=getParentHelper(),c=1;0==g_curpageidx&&(c=0);a.startDrawingSymbol(c,getKeyidFromGid(b))}}function getKeyidFromGid(b){var a=b;19==b?a=2040:51==b?a=2041:52==b?a=2042:53==b?a=2043:54==b?a=2044:55==b?a=2052:56==b?a=2053:57==b?a=2054:58==b?a=2039:59==b?a=2034:60==b?a=2055:61==b?a=2056:62==b?a=2057:63==b?a=2038:64==b?a=2035:65==b?a=2036:66==b&&(a=2037);return a}
function getGidFromKeyid(b){var a=b;2E3<b&&(2040==b?a=19:2041==b?a=51:2042==b?a=52:2043==b?a=53:2044==b?a=54:2052==b?a=55:2053==b?a=56:2054==b?a=57:2039==b?a=58:2034==b?a=59:2055==b?a=60:2056==b?a=61:2057==b?a=62:2038==b?a=63:2035==b?a=64:2036==b?a=65:2037==b&&(a=66));return a}function setParentHelper(b){window.phelp=b;null==window.phelp&&(window.phelp=parent.g_drawHelper);thisWidget=window.phelp}function getParentHelper(){return window.phelp}prepareGlyphList(document.getElementById("plotlist"));
window.font=parent.font;window.fontScale=parent.fontScale;window.fontSize=parent.fontSize;window.fontBaseline=parent.fontBaseline;plotEdit.loadConfig();
